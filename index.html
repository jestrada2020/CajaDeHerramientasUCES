<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Caja de Herramientas Matemáticas</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
        }
        #sidebar {
            width: 250px;
            background-color: #f0f0f0;
            padding: 20px;
            height: 100vh;
        }
        #content {
            flex-grow: 1;
            padding: 20px;
        }
        .tool-container {
            background-color: #ffffff;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 20px;
            margin-top: 20px;
        }
        h2, h3 {
            color: #333;
        }
        ul {
            list-style-type: none;
            padding: 0;
        }
        li {
            margin-bottom: 10px;
        }
        button {
            background-color: #4CAF50;
            border: none;
            color: white;
            padding: 10px 20px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            margin: 4px 2px;
            cursor: pointer;
            border-radius: 5px;
        }
        input[type="text"], input[type="number"] {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }
        .result {
            margin-top: 20px;
            font-weight: bold;
        }
        .function-section {
            margin-bottom: 30px;
            border-bottom: 1px solid #ddd;
            padding-bottom: 20px;
        }
        .precision-control {
            display: flex;
            align-items: center;
            margin-top: 10px;
        }
        .precision-control label {
            margin-right: 10px;
        }
        .precision-control input[type="number"] {
            width: 60px;
        }
        .coefficient-inputs {
            display: flex;
            justify-content: space-between;
        }
        .coefficient-inputs input {
            width: 30%;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
        .matrix-input {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 10px;
        }
        .matrix-input-3x3 {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-bottom: 10px;
        }
        .matrix-input-4x4 {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-bottom: 10px;
        }
        .matrix-input input {
            width: 100%;
        }
    </style>
</head>
<body>
    <div id="sidebar">
        <h2>Caja de Herramientas</h2>
        <ul>
            <li><button onclick="app.loadTool('introduccion')">Introducción</button></li>
            <li><button onclick="app.loadTool('algebra')">Álgebra Elemental</button></li>
            <li><button onclick="app.loadTool('trigonometria')">Trigonometría</button></li>
            <li><button onclick="app.loadTool('algebraLineal')">Álgebra Lineal</button></li>
            <li><button onclick="app.loadTool('calculoDiferencial')">Cálculo Diferencial</button></li>
            <li><button onclick="app.loadTool('calculoIntegral')">Cálculo Integral</button></li>
            <li><button onclick="app.loadTool('calculoMultivariable')">Cálculo Multivariable</button></li>
            <li><button onclick="app.loadTool('ecuacionesDiferenciales')">Ecuaciones Diferenciales</button></li>
            <li><button onclick="app.loadTool('analisisNumerico')">Análisis Numérico</button></li>
            <li><button onclick="app.loadTool('g_Geogebra')">Geogebra Clasico</button></li>
            <li><button onclick="app.loadTool('g_Demos')">Desmos Gráfica 2D</button></li>
            <li><button onclick="app.loadTool('g_Demos2')">Desmos Gráfica 3D</button></li>
            <li><button onclick="app.loadTool('Demos_Calculadora')">Calculadora Científica Desmos</button></li>
        </ul>
    </div>
    <div id="content">
        <div id="tool-content" class="tool-container">
            <h2>Selecciona una herramienta</h2>
            <p>Elige una herramienta desde la barra lateral para empezar a trabajar.</p>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.8.0/math.js"></script>
    <script>
        var app = {
            loadTool: function(tool) {
                const toolContent = document.getElementById('tool-content');
                if (!toolContent) return;

                let content = '';

                switch(tool) {
                    case 'introduccion':
                    content = `
                        <h3>Introducción a la Caja de Herramientas</h3>
                        <p>Hace algún tiempo el profesor Carlos Andrés Escobar Guerra propuso la creación de unas cartillas para los cursos de matemáticas de la facultad de Ciencias y Biotecnología, la elaboración de las cartillas produjo la necesidad de tener las herramientas para desarrollar las actividades de dicha cartilla.</p>
                        <p>Así es que se llegó a la creación de una caja de herramientas donde se encontraran aplicaciones de aritmética, matemáticas I, II y III, y aplicaciones más avanzadas, la caja de herramientas hace más dinámica la clase, hace que los estudiantes adquieran los saberes esenciales más rápidamente, depende del profesor y de los estudiantes no pasar por alto los detalles que conducen a la solución.</p>
                        <p>Para solucionar muchos de los ejercicios y problemas no es necesario ser un gran estudiante en matemáticas, eso sí, debe saber interiorizar, entender los conceptos que ayudan a solucionar el problema y en la caja de herramientas encontrará los instrumentos que le ayudaran a solucionar los problemas; depende del alumno escoger la herramienta adecuada.</p>
                        <p>Otra ventaja de la caja de herramientas es que las aplicaciones se pueden encontrar en un sólo espacio virtual y diseñadas de acuerdo a las necesidades de nuestros estudiantes, para la construcción de las herramientas se utilizó R, LaTeX, Flexdashboard, Bookdown, Shiny, y Geogebra.</p>
                        <p>Se puede decir que el equipo de trabajo está conformado por el profesor Carlos Andrés Escobar Guerra, Pablo Andrés Guzmán, John Jairo Estrada Álvarez y Juan Albero Arias Quiceno. Gracias a la invaluable ayuda del profesor de estadística y programación Pablo Andrés Guzmán puesto que él inspiró la creación de un grupo de estudio en el cual compartía sus conocimientos de R, de otros programas y actualmente da su opinión acerca de las nuevas aplicaciones. John Jairo Estrada, el cerebro del proyecto, es el programador de todas las aplicaciones.</p>
                    `;
                    break;



                    case 'g_GeogebraSimbolico':
                        content = `
                            <h2>Geogebra - Cálculo Simbólico (CAS)</h2>
                            <iframe src="https://www.geogebra.org/cas" 
                                    width="800" 
                                    height="600" 
                                    frameborder="0" 
                                    allowfullscreen 
                                    style="border: 1px solid #ccc">
                            </iframe>
                        `;
                        break;

                    case 'g_Geogebra':
                        content = `
                            <h2>Aplicaciónes Geogebra </h2>
                            <div id="ggb-element"></div>
                        `;
                        
                        // Función para inicializar Geogebra
                        function initGeogebra() {
                            var params = {
                                "appName": "OOR7QQOe",
                                "width": 800,
                                "height": 600,
                                "showToolBar": true,
                                "showAlgebraInput": true,
                                "showMenuBar": true,
                                "showResetIcon": true,
                                "enableLabelDrags": false,
                                "enableShiftDragZoom": true,
                                "enableRightClick": false,
                                "showToolBarHelp": false,
                                "errorDialogsActive": true,
                                "useBrowserForJS": true,
                                "allowStyleBar": false,
                                "preventFocus": false,
                                "showZoomButtons": true,
                                "capturingThreshold": 3,
                                "showFullscreenButton": true,
                                "scale": 1,
                                "disableAutoScale": false,
                                "language": "es",
                                "borderColor": "#ccc",
                                "buttonShadows": false,
                                "buttonRounding": 0.7
                            };

                            var applet = new GGBApplet(params, true);
                            applet.inject('ggb-element');
                        }

                        // Cargar el script de Geogebra solo si no está cargado
                        if (typeof GGBApplet === 'undefined') {
                            const script = document.createElement('script');
                            script.src = 'https://www.geogebra.org/apps/deployggb.js';
                            script.async = true;
                            script.onload = function() {
                                setTimeout(initGeogebra, 100); // Pequeño retraso para asegurar que todo esté cargado
                            };
                            script.onerror = function() {
                                document.getElementById('ggb-element').innerHTML = 
                                    '<p>Error al cargar Geogebra. Por favor, revise su conexión a internet y recargue la página.</p>';
                            };
                            document.head.appendChild(script);
                        } else {
                            setTimeout(initGeogebra, 100);
                        }
                        break;

                    

                    case 'g_Demos':
                        content = `
                            <h2>Graficadora 2D Desmos</h2>
                            <iframe 
                                src="https://www.desmos.com/calculator?lang=es" 
                                width="100%" 
                                height="500px" 
                                style="border: 1px solid #ccc" 
                                frameborder="0">
                            </iframe>
                        `;
                        break;


                    case 'g_Demos2':
                        content = `
                            <h2>Graficadora 3D Desmos</h2>
                            <iframe 
                                src="https://www.desmos.com/3d?lang=es" 
                                width="100%" 
                                height="500px" 
                                style="border: 1px solid #ccc" 
                                frameborder="0">
                            </iframe>
                        `;
                        break;




                    case 'g_GeogebraProb':
                        content = `
                            <h2>Geogebra Aplicación estadística</h2>
                            <iframe src="https://www.geogebra.org/probability" 
                                    width="800" 
                                    height="600" 
                                    frameborder="0" 
                                    allowfullscreen 
                                    style="border: 1px solid #ccc">
                            </iframe>
                        `;
                        break;




                    case 'Demos_Calculadora':
                        content = `
                            <h2>Calculadora Científica Desmos</h2>
                            <iframe 
                                src="https://www.desmos.com/scientific?lang=es" 
                                width="100%" 
                                height="500px" 
                                style="border: 1px solid #ccc" 
                                frameborder="0">
                            </iframe>
                        `;
                        break;



                    case 'algebra':
                        content = `

                            <div class="function-section">
                                <h3>Introducción a la Caja de Herramientas</h3>
                                <p>Hace algún tiempo el profesor Carlos Andrés Escobar Guerra propuso la creación de unas cartillas para los cursos de matemáticas de la facultad de Ciencias y Biotecnología, la elaboración de las cartillas produjo la necesidad de tener las herramientas para desarrollar las actividades de dicha cartilla.</p>
                                <p>Así es que se llegó a la creación de una caja de herramientas donde se encontrarán aplicaciones de aritmética, matemáticas I, II y III, y aplicaciones más avanzadas. La caja de herramientas hace más dinámica la clase, hace que los estudiantes adquieran los saberes esenciales más rápidamente, depende del profesor y de los estudiantes no pasar por alto los detalles que conducen a la solución.</p>
                                <p>Para solucionar muchos de los ejercicios y problemas no es necesario ser un gran estudiante en matemáticas. Eso sí, debe saber interiorizar y entender los conceptos que ayudan a solucionar el problema, y en la caja de herramientas encontrará los instrumentos que le ayudarán a solucionar los problemas; depende del alumno escoger la herramienta adecuada.</p>
                                <p>Otra ventaja de la caja de herramientas es que las aplicaciones se pueden encontrar en un solo espacio virtual y están diseñadas de acuerdo a las necesidades de nuestros estudiantes. Para la construcción de las herramientas se utilizó R, LaTeX, Flexdashboard, Bookdown, Shiny, y Geogebra.</p>
                                <p>Se puede decir que el equipo de trabajo está conformado por el profesor Carlos Andrés Escobar Guerra, Pablo Andrés Guzmán, John Jairo Estrada Álvarez y Juan Albero Arias Quiceno. Gracias a la invaluable ayuda del profesor de estadística y programación Pablo Andrés Guzmán, quien inspiró la creación de un grupo de estudio en el cual compartía sus conocimientos de R, de otros programas, y actualmente da su opinión acerca de las nuevas aplicaciones. John Jairo Estrada, el cerebro del proyecto, es el programador de todas las aplicaciones.</p>
                            </div>


                            <h2>Álgebra Elemental</h2>
                            
                            <div class="function-section">
                                <h3>Función Polinómica General</h3>
                                <p>Ingresa una función algebraica y evalúala para un valor específico de x.</p>
                                <input type="text" id="functionExpression" placeholder="Ingresa una función (por ejemplo: 2*x^2 + 3*x - 1)">
                                <input type="number" id="xValue" placeholder="Valor de x">
                                <div class="precision-control">
                                    <label for="polynomialPrecision">Precisión:</label>
                                    <input type="number" id="polynomialPrecision" value="5" min="0" max="15">
                                </div>
                                <button onclick="app.evaluateFunction()">Evaluar</button>
                                <p id="polynomialResult" class="result"></p>
                            </div>

                            <div class="function-section">
                                <h3>Tabla para Funciones</h3>
                                <p>Ingresa una función, un intervalo y un tamaño de paso para generar una tabla de valores.</p>
                                <input type="text" id="tableFunctionExpression" placeholder="Ingresa una función (por ejemplo: sin(x))">
                                <input type="number" id="startInterval" placeholder="Valor inicial del intervalo">
                                <input type="number" id="endInterval" placeholder="Valor final del intervalo">
                                <input type="number" id="stepSize" placeholder="Tamaño del paso">
                                <div class="precision-control">
                                    <label for="tablePrecision">Precisión:</label>
                                    <input type="number" id="tablePrecision" value="5" min="0" max="15">
                                </div>
                                <button onclick="app.generateTable()">Generar Tabla</button>
                                <div id="tableResult"></div>
                            </div>

                            <div class="function-section">
                                <h3>Ecuación Cuadrática</h3>
                                <p>Ingresa los coeficientes A, B y C de la ecuación cuadrática Ax² + Bx + C = 0</p>
                                <div class="coefficient-inputs">
                                    <input type="number" id="coefficientA" placeholder="A">
                                    <input type="number" id="coefficientB" placeholder="B">
                                    <input type="number" id="coefficientC" placeholder="C">
                                </div>
                                <div class="precision-control">
                                    <label for="quadraticPrecision">Precisión:</label>
                                    <input type="number" id="quadraticPrecision" value="5" min="0" max="15">
                                </div>
                                <button onclick="app.solveQuadraticEquation()">Resolver</button>
                                <p id="discriminantResult" class="result"></p>
                                <p id="sqrtDiscriminantResult" class="result"></p>
                                <p id="vertexResult" class="result"></p>
                                <p id="quadraticRootsResult" class="result"></p>
                            </div>

                            <div class="function-section">
                                <h3>Función Racional</h3>
                                <p>Ingresa el numerador y denominador de la función racional en términos de x, y evalúala para un valor específico de x.</p>
                                <input type="text" id="numeratorExpression" placeholder="Ingresa el numerador (por ejemplo: x^2 + 3)">
                                <input type="text" id="denominatorExpression" placeholder="Ingresa el denominador (por ejemplo: x - 2)">
                                <input type="number" id="xValueRational" placeholder="Valor de x">
                                <div class="precision-control">
                                    <label for="rationalPrecision">Precisión:</label>
                                    <input type="number" id="rationalPrecision" value="5" min="0" max="15">
                                </div>
                                <button onclick="app.evaluateRationalFunction()">Evaluar</button>
                                <p id="rationalResult" class="result"></p>
                            </div>
                        `;
                        break;
                    case 'trigonometria':
                        content = `
                            <h2>Trigonometría</h2>
                            <p>Calcula funciones trigonométricas.</p>
                            <input type="number" id="angle" placeholder="Ingresa un ángulo en grados">
                            <select id="trigFunction">
                                <option value="sin">Seno</option>
                                <option value="cos">Coseno</option>
                                <option value="tan">Tangente</option>
                                <option value="csc">Cosecante</option>
                                <option value="sec">Secante</option>
                                <option value="cot">Cotangente</option>
                            </select>
                            <div class="precision-control">
                                <label for="trigPrecision">Precisión:</label>
                                <input type="number" id="trigPrecision" value="5" min="0" max="15">
                            </div>
                            <button onclick="app.calculateTrig()">Calcular</button>
                            <p id="trigResult" class="result"></p>
                        `;
                        break;
                    case 'algebraLineal':
                        content = `
                            <h2>Álgebra Lineal</h2>
                            <div class="function-section">
                                <h3>Solución de un Sistema 2x2</h3>
                           <div class="grid-container" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; padding: 20px;">
                                <!-- Primera fila -->
                                <div class="function-section" style="grid-column: 1; border: 1px solid #ccc; padding: 15px; border-radius: 5px;">
                                    <h3>Coeficientes Ecuación 1</h3>
                                    <div class="matrix-input">
                                        <input type="number" id="system2x2A11" placeholder="a11" style="width: 120px; margin: 5px;">
                                        <input type="number" id="system2x2A12" placeholder="a12" style="width: 120px; margin: 5px;">
                                        <input type="number" id="system2x2B1" placeholder="b1" style="width: 120px; margin: 5px;">
                                    </div>
                                </div>

                                <div class="function-section" style="grid-column: 2; border: 1px solid #ccc; padding: 15px; border-radius: 5px;">
                                    <h3>Coeficientes Ecuación 2</h3>
                                    <div class="matrix-input">
                                        <input type="number" id="system2x2A21" placeholder="a21" style="width: 120px; margin: 5px;">
                                        <input type="number" id="system2x2A22" placeholder="a22" style="width: 120px; margin: 5px;">
                                        <input type="number" id="system2x2B2" placeholder="b2" style="width: 120px; margin: 5px;">
                                    </div>
                                </div>

                                <div class="function-section" style="grid-column: 3; border: 1px solid #ccc; padding: 15px; border-radius: 5px;">
                                    <h3>Control de Precisión</h3>
                                    <div class="precision-control">
                                        <label for="system2x2Precision">Precisión:</label>
                                        <input type="number" id="system2x2Precision" value="5" min="0" max="15" style="width: 60px; margin: 5px;">
                                    </div>
                                    <button onclick="app.solveSystem2x2()" style="margin-top: 10px; padding: 8px 15px;">Resolver Sistema</button>
                                </div>

                                <!-- Segunda fila -->
                                <div class="result-section" style="grid-column: 1 / span 3; border: 1px solid #ccc; padding: 15px; border-radius: 5px;">
                                    <h3>Resultado del Sistema</h3>
                                    <p id="systemResult2x2" class="result"></p>
                                </div>
                            </div>
                            
                            <div class="function-section">
                                <h3>Solución de un Sistema 3x3</h3>

                                <div class="grid-container" style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; padding: 20px;">
                                 <div class="title-section" style="grid-column: 1 / span 4; text-align: center; margin-bottom: 20px;">
                                    <h3>Solución de un Sistema 3x3</h3>
                                    <p>Ingresa los coeficientes y los términos independientes para resolver el sistema de ecuaciones 3x3.</p>
                                </div>
                                <!-- Primera fila -->
                                <div class="function-section" style="grid-column: 1; border: 1px solid #ccc; padding: 15px; border-radius: 5px;">
                                    <h3>Ecuación 1</h3>
                                    <p>Coeficientes:</p>
                                    <div class="matrix-input">
                                        <input type="number" id="system3x3A11" placeholder="a11" style="width: 80px; height: 30px; margin: 5px; padding: 5px;">
                                        <input type="number" id="system3x3A12" placeholder="a12" style="width: 80px; height: 30px; margin: 5px; padding: 5px;">
                                        <input type="number" id="system3x3A13" placeholder="a13" style="width: 80px; height: 30px; margin: 5px; padding: 5px;">
                                        <input type="number" id="system3x3B1" placeholder="b1" style="width: 80px; height: 30px; margin: 5px; padding: 5px;">
                                    </div>
                                </div>

                                <div class="function-section" style="grid-column: 2; border: 1px solid #ccc; padding: 15px; border-radius: 5px;">
                                    <h3>Ecuación 2</h3>
                                    <p>Coeficientes:</p>
                                    <div class="matrix-input">
                                        <input type="number" id="system3x3A21" placeholder="a21" style="width: 80px; height: 30px; margin: 5px; padding: 5px;">
                                        <input type="number" id="system3x3A22" placeholder="a22" style="width: 80px; height: 30px; margin: 5px; padding: 5px;">
                                        <input type="number" id="system3x3A23" placeholder="a23" style="width: 80px; height: 30px; margin: 5px; padding: 5px;">
                                        <input type="number" id="system3x3B2" placeholder="b2" style="width: 80px; height: 30px; margin: 5px; padding: 5px;">
                                    </div>
                                </div>

                                <div class="function-section" style="grid-column: 3; border: 1px solid #ccc; padding: 15px; border-radius: 5px;">
                                    <h3>Ecuación 3</h3>
                                    <p>Coeficientes:</p>
                                    <div class="matrix-input">
                                        <input type="number" id="system3x3A31" placeholder="a31" style="width: 80px; height: 30px; margin: 5px; padding: 5px;">
                                        <input type="number" id="system3x3A32" placeholder="a32" style="width: 80px; height: 30px; margin: 5px; padding: 5px;">
                                        <input type="number" id="system3x3A33" placeholder="a33" style="width: 80px; height: 30px; margin: 5px; padding: 5px;">
                                        <input type="number" id="system3x3B3" placeholder="b3" style="width: 80px; height: 30px; margin: 5px; padding: 5px;">
                                    </div>
                                </div>

                                <div class="function-section" style="grid-column: 4; border: 1px solid #ccc; padding: 15px; border-radius: 5px;">
                                    <h3>Control</h3>
                                    <div class="precision-control">
                                        <label for="system3x3Precision">Precisión:</label>
                                        <input type="number" id="system3x3Precision" value="5" min="0" max="15" style="width: 80px; height: 30px; margin: 5px; padding: 5px;">
                                    </div>
                                    <button onclick="app.solveSystem3x3()" style="margin-top: 10px; padding: 10px 20px; width: 150px; height: 60px; font-size: 16px;">Resolver Sistema</button>
                                </div>

                                <!-- Segunda fila -->
                               

                                <!-- Tercera fila -->
                                <div class="result-section" style="grid-column: 1 / span 4; border: 1px solid #ccc; padding: 15px; border-radius: 5px;">
                                    <h3>Resultado del Sistema</h3>
                                    <p id="systemResult3x3" class="result"></p>
                                </div>
                            </div>


                            <div class="function-section">
                                <h3>Solución de un Sistema 4x4</h3>
                               <div class="grid-container" style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 20px; padding: 20px;">
                                <!-- Primera fila - Título -->
                                <div class="title-section" style="grid-column: 1 / span 5; text-align: center; margin-bottom: 20px;">
                                    <h3>Solución de un Sistema 4x4</h3>
                                    <p>Ingresa los coeficientes y los términos independientes para resolver el sistema de ecuaciones 4x4.</p>
                                </div>

                                <!-- Segunda fila - Inputs -->
                                <div class="function-section" style="grid-column: 1; border: 1px solid #ccc; padding: 15px; border-radius: 5px;">
                                    <h3>Ecuación 1</h3>
                                    <p>Coeficientes:</p>
                                    <div class="matrix-input">
                                        <input type="number" id="system4x4A11" placeholder="a11" style="width: 80px; height: 30px; margin: 5px; padding: 5px;">
                                        <input type="number" id="system4x4A12" placeholder="a12" style="width: 80px; height: 30px; margin: 5px; padding: 5px;">
                                        <input type="number" id="system4x4A13" placeholder="a13" style="width: 80px; height: 30px; margin: 5px; padding: 5px;">
                                        <input type="number" id="system4x4A14" placeholder="a14" style="width: 80px; height: 30px; margin: 5px; padding: 5px;">
                                        <input type="number" id="system4x4B1" placeholder="b1" style="width: 80px; height: 30px; margin: 5px; padding: 5px;">
                                    </div>
                                </div>

                                <div class="function-section" style="grid-column: 2; border: 1px solid #ccc; padding: 15px; border-radius: 5px;">
                                    <h3>Ecuación 2</h3>
                                    <p>Coeficientes:</p>
                                    <div class="matrix-input">
                                        <input type="number" id="system4x4A21" placeholder="a21" style="width: 80px; height: 30px; margin: 5px; padding: 5px;">
                                        <input type="number" id="system4x4A22" placeholder="a22" style="width: 80px; height: 30px; margin: 5px; padding: 5px;">
                                        <input type="number" id="system4x4A23" placeholder="a23" style="width: 80px; height: 30px; margin: 5px; padding: 5px;">
                                        <input type="number" id="system4x4A24" placeholder="a24" style="width: 80px; height: 30px; margin: 5px; padding: 5px;">
                                        <input type="number" id="system4x4B2" placeholder="b2" style="width: 80px; height: 30px; margin: 5px; padding: 5px;">
                                    </div>
                                </div>

                                <div class="function-section" style="grid-column: 3; border: 1px solid #ccc; padding: 15px; border-radius: 5px;">
                                    <h3>Ecuación 3</h3>
                                    <p>Coeficientes:</p>
                                    <div class="matrix-input">
                                        <input type="number" id="system4x4A31" placeholder="a31" style="width: 80px; height: 30px; margin: 5px; padding: 5px;">
                                        <input type="number" id="system4x4A32" placeholder="a32" style="width: 80px; height: 30px; margin: 5px; padding: 5px;">
                                        <input type="number" id="system4x4A33" placeholder="a33" style="width: 80px; height: 30px; margin: 5px; padding: 5px;">
                                        <input type="number" id="system4x4A34" placeholder="a34" style="width: 80px; height: 30px; margin: 5px; padding: 5px;">
                                        <input type="number" id="system4x4B3" placeholder="b3" style="width: 80px; height: 30px; margin: 5px; padding: 5px;">
                                    </div>
                                </div>

                                <div class="function-section" style="grid-column: 4; border: 1px solid #ccc; padding: 15px; border-radius: 5px;">
                                    <h3>Ecuación 4</h3>
                                    <p>Coeficientes:</p>
                                    <div class="matrix-input">
                                        <input type="number" id="system4x4A41" placeholder="a41" style="width: 80px; height: 30px; margin: 5px; padding: 5px;">
                                        <input type="number" id="system4x4A42" placeholder="a42" style="width: 80px; height: 30px; margin: 5px; padding: 5px;">
                                        <input type="number" id="system4x4A43" placeholder="a43" style="width: 80px; height: 30px; margin: 5px; padding: 5px;">
                                        <input type="number" id="system4x4A44" placeholder="a44" style="width: 80px; height: 30px; margin: 5px; padding: 5px;">
                                        <input type="number" id="system4x4B4" placeholder="b4" style="width: 80px; height: 30px; margin: 5px; padding: 5px;">
                                    </div>
                                </div>

                                <div class="function-section" style="grid-column: 5; border: 1px solid #ccc; padding: 15px; border-radius: 5px;">
                                    <h3>Control</h3>
                                    <div class="precision-control">
                                        <label for="system4x4Precision">Precisión:</label>
                                        <input type="number" id="system4x4Precision" value="5" min="0" max="15" style="width: 80px; height: 30px; margin: 5px; padding: 5px;">
                                    </div>
                                    <button onclick="app.solveSystem4x4()" style="margin-top: 10px; padding: 10px 20px; width: 150px; height: 60px; font-size: 16px;">Resolver Sistema</button>
                                </div>

                                <!-- Tercera fila - Resultado -->
                                <div class="result-section" style="grid-column: 1 / span 5; border: 1px solid #ccc; padding: 15px; border-radius: 5px;">
                                    <h3>Resultado del Sistema</h3>
                                    <p id="systemResult4x4" class="result"></p>
                                </div>
                            </div>


                            <div class="function-section">
                                <h3>Determinante de una Matriz 2x2</h3>
                                <p>Ingresa los elementos de la matriz 2x2 para calcular el determinante.</p>
                                <div class="matrix-input">
                                    <input type="number" id="matrixA11" placeholder="a11">
                                    <input type="number" id="matrixA12" placeholder="a12">
                                    <input type="number" id="matrixA21" placeholder="a21">
                                    <input type="number" id="matrixA22" placeholder="a22">
                                </div>
                                <div class="precision-control">
                                    <label for="determinant2x2Precision">Precisión:</label>
                                    <input type="number" id="determinant2x2Precision" value="5" min="0" max="15">
                                </div>
                                <button onclick="app.calculateDeterminant2x2()">Calcular Determinante</button>
                                <p id="determinantResult2x2" class="result"></p>
                            </div>

                            <div class="function-section">
                                <h3>Determinante de una Matriz 3x3</h3>
                                <p>Ingresa los elementos de la matriz 3x3 para calcular el determinante.</p>
                                <div class="matrix-input-3x3">
                                    <input type="number" id="matrix3x3A11" placeholder="a11">
                                    <input type="number" id="matrix3x3A12" placeholder="a12">
                                    <input type="number" id="matrix3x3A13" placeholder="a13">
                                    <input type="number" id="matrix3x3A21" placeholder="a21">
                                    <input type="number" id="matrix3x3A22" placeholder="a22">
                                    <input type="number" id="matrix3x3A23" placeholder="a23">
                                    <input type="number" id="matrix3x3A31" placeholder="a31">
                                    <input type="number" id="matrix3x3A32" placeholder="a32">
                                    <input type="number" id="matrix3x3A33" placeholder="a33">
                                </div>
                                <div class="precision-control">
                                    <label for="determinant3x3Precision">Precisión:</label>
                                    <input type="number" id="determinant3x3Precision" value="5" min="0" max="15">
                                </div>
                                <button onclick="app.calculateDeterminant3x3()">Calcular Determinante</button>
                                <p id="determinantResult3x3" class="result"></p>
                            </div>

                            <div class="function-section">
                                <h3>Determinante de una Matriz 4x4</h3>
                                <p>Ingresa los elementos de la matriz 4x4 para calcular el determinante.</p>
                                <div class="matrix-input-4x4">
                                    <input type="number" id="matrix4x4A11" placeholder="a11">
                                    <input type="number" id="matrix4x4A12" placeholder="a12">
                                    <input type="number" id="matrix4x4A13" placeholder="a13">
                                    <input type="number" id="matrix4x4A14" placeholder="a14">
                                    <input type="number" id="matrix4x4A21" placeholder="a21">
                                    <input type="number" id="matrix4x4A22" placeholder="a22">
                                    <input type="number" id="matrix4x4A23" placeholder="a23">
                                    <input type="number" id="matrix4x4A24" placeholder="a24">
                                    <input type="number" id="matrix4x4A31" placeholder="a31">
                                    <input type="number" id="matrix4x4A32" placeholder="a32">
                                    <input type="number" id="matrix4x4A33" placeholder="a33">
                                    <input type="number" id="matrix4x4A34" placeholder="a34">
                                    <input type="number" id="matrix4x4A41" placeholder="a41">
                                    <input type="number" id="matrix4x4A42" placeholder="a42">
                                    <input type="number" id="matrix4x4A43" placeholder="a43">
                                    <input type="number" id="matrix4x4A44" placeholder="a44">
                                </div>
                                <div class="precision-control">
                                    <label for="determinant4x4Precision">Precisión:</label>
                                    <input type="number" id="determinant4x4Precision" value="5" min="0" max="15">
                                </div>
                                <button onclick="app.calculateDeterminant4x4()">Calcular Determinante</button>
                                <p id="determinantResult4x4" class="result"></p>
                            </div>
                        `;
                        break;
                    case 'calculoDiferencial':
                        content = `
                            <h2>Cálculo Diferencial</h2>
                            <div class="function-section">
                                <h3>Derivada de f(x)</h3>
                                <p>Ingresa una función polinómica y la aplicación obtendrá la derivada de f(x). Además, puedes evaluar tanto f, f' como la segunda derivada de f en un valor específico de x.</p>
                                <input type="text" id="differentialFunctionExpression" placeholder="Ingresa una función (por ejemplo: 3*x^3 + 2*x - 5)">
                                <input type="number" id="xValueDifferential" placeholder="Valor de x">
                                <div class="precision-control">
                                    <label for="differentialPrecision">Precisión:</label>
                                    <input type="number" id="differentialPrecision" value="5" min="0" max="15">
                                </div>
                                <button onclick="app.calculateDerivative()">Calcular Derivada</button>
                                <button onclick="app.calculateSecondDerivative()">Calcular Segunda Derivada</button>
                                <button onclick="app.evaluateFunctionAndDerivative()">Evaluar f, f' y f''</button>
                                <p id="derivativeResult" class="result"></p>
                                <p id="secondDerivativeResult" class="result"></p>
                                <p id="functionValueResult" class="result"></p>
                            </div>

                            <div class="function-section">
                            <h3>Primera y Segunda Derivada de Funciones Racionales</h3>
                            <p>Ingresa el numerador y el denominador de una función racional. Evalúa la función, su primera derivada y su segunda derivada en un valor específico de x.</p>
                            <input type="text" id="rationalNumeratorExpression" placeholder="Ingresa el numerador (por ejemplo: x^2 + 3)">
                            <input type="text" id="rationalDenominatorExpression" placeholder="Ingresa el denominador (por ejemplo: x - 2)">
                            <input type="number" id="rationalXValue" placeholder="Valor de x">
                            <div class="precision-control">
                                <label for="rationalDerivativePrecision">Precisión:</label>
                                <input type="number" id="rationalDerivativePrecision" value="5" min="0" max="15">
                            </div>
                            <button onclick="app.calculateRationalDerivatives()">Calcular Derivadas</button>
                            <p id="rationalFunctionValueResult" class="result"></p>
                            <p id="rationalFirstDerivativeResult" class="result"></p>
                            <p id="rationalSecondDerivativeResult" class="result"></p>
                            </div>

                            <!-- Derivadas de funciones trascendentes -->
                            <div class="function-section">
                            <h3>Derivadas de Funciones Trascendentes</h3>
                            <p>Ingresa una función trascendente (e.g., sin(x), cos(x), exp(x)) y evalúa la función, su primera derivada y segunda derivada en un valor específico de x.</p>
                            <input type="text" id="transcendentalFunctionExpression" placeholder="Ingresa una función (por ejemplo: sin(x) + log(x))">
                            <input type="number" id="transcendentalXValue" placeholder="Valor de x">
                            <div class="precision-control">
                                <label for="transcendentalDerivativePrecision">Precisión:</label>
                                <input type="number" id="transcendentalDerivativePrecision" value="5" min="0" max="15">
                            </div>
                            <button onclick="app.calculateTranscendentalDerivatives()">Calcular Derivadas</button>
                            <p id="transcendentalFunctionValueResult" class="result"></p>
                            <p id="transcendentalFirstDerivativeResult" class="result"></p>
                            <p id="transcendentalSecondDerivativeResult" class="result"></p>
                            </div>



                        `;
                        break;
                        case 'calculoIntegral':
                        content = `
                            <h2>Cálculo Integral</h2>
                            <div class="function-section">
                                <h3>Aproximación del Área Bajo la Curva</h3>
                                <p>Ingresa una función polinómica y un intervalo para aproximar el área bajo la curva.</p>
                                <input type="text" id="integralFunctionExpression" placeholder="Ingresa una función (por ejemplo: 2*x^2 + 3*x - 1)">
                                <input type="number" id="startIntervalIntegral" placeholder="Valor inicial del intervalo">
                                <input type="number" id="endIntervalIntegral" placeholder="Valor final del intervalo">
                                <div class="precision-control">
                                    <label for="integralPrecision">Precisión:</label>
                                    <input type="number" id="integralPrecision" value="5" min="0" max="15">
                                </div>
                                <button onclick="app.calculateAreaUnderCurve()">Calcular Área</button>
                                <p id="integralResult" class="result"></p>
                            </div>

                            <div class="function-section">
                            <h3>Integración de Funciones Racionales y Trascendentes</h3>
                            <p>Ingresa una función racional o trascendente y un intervalo para calcular la integral.</p>
                            <input type="text" id="rationalFunctionExpression" placeholder="Ingresa una función (por ejemplo: sin(x) / (x^2 + 1))">
                            <input type="number" id="startIntervalRational" placeholder="Valor inicial del intervalo">
                            <input type="number" id="endIntervalRational" placeholder="Valor final del intervalo">
                            <div class="precision-control">
                                <label for="rationalPrecision">Precisión:</label>
                                <input type="number" id="rationalPrecision" value="5" min="0" max="15">
                            </div>
                            <button onclick="app.calculateRationalIntegral()">Calcular Integral</button>
                            <p id="rationalIntegralResult" class="result"></p>
                            </div>
                        `;
                        break;
                        case 'calculoMultivariable':
                        content = `
                        <h2>Cálculo Multivariable</h2>
                        
                        <div class="function-section">
                        <h3>Evaluación de Funciones Polinómicas en Dos Variables</h3>
                        <p>Ingresa una función polinómica en dos variables (x, y) y evalúala en los valores ingresados de x e y.</p>
                        <input type="text" id="multivariableFunctionExpression" placeholder="Ingresa una función (por ejemplo: 3*x^2 + 2*x*y - y^2)">
                        <input type="number" id="xValueMultivariable" placeholder="Valor de x">
                        <input type="number" id="yValueMultivariable" placeholder="Valor de y">
                        <div class="precision-control">
                            <label for="multivariablePrecision">Precisión:</label>
                            <input type="number" id="multivariablePrecision" value="5" min="0" max="15">
                        </div>
                        <button onclick="app.evaluateMultivariableFunction()">Evaluar Función</button>
                        <p id="multivariableFunctionResult" class="result"></p>
                        </div>

                        <div class="function-section">
                            <h3>Derivadas Parciales de Funciones Polinómicas en Dos Variables</h3>
                            <p>Ingresa una función polinómica en dos variables (x, y) y evalúa la función, las derivadas parciales de primer y segundo orden con respecto a x e y en los valores especificados de x e y.</p>
                            <input type="text" id="partialFunctionExpression" placeholder="Ingresa una función (por ejemplo: 3*x^2 + 2*x*y - y^2)">
                            <input type="number" id="xValuePartial" placeholder="Valor de x">
                            <input type="number" id="yValuePartial" placeholder="Valor de y">
                            <div class="precision-control">
                                <label for="partialPrecision">Precisión:</label>
                                <input type="number" id="partialPrecision" value="5" min="0" max="15">
                            </div>
                            <button onclick="app.calculatePartialDerivatives()">Calcular Derivadas Parciales</button>
                            <p id="partialFunctionValueResult" class="result"></p>
                            <p id="partialDerivativeXResult" class="result"></p>
                            <p id="partialDerivativeYResult" class="result"></p>
                            <p id="secondPartialDerivativeXXResult" class="result"></p>
                            <p id="secondPartialDerivativeYYResult" class="result"></p>
                            <p id="secondPartialDerivativeXYResult" class="result"></p>
                        </div>

                        <!-- Derivadas parciales de funciones trascendentes en dos variables -->
                        <div class="function-section">
                            <h3>Derivadas Parciales de Funciones Trascendentes en Dos Variables</h3>
                            <p>Ingresa una función trascendente en dos variables (x, y) y evalúa la función, las derivadas parciales de primer y segundo orden con respecto a x e y en los valores especificados de x e y.</p>
                            <input type="text" id="transcendentalFunctionExpression" placeholder="Ingresa una función (por ejemplo: sin(x) + log(y) + exp(x))">
                            <input type="number" id="xValueTranscendental" placeholder="Valor de x">
                            <input type="number" id="yValueTranscendental" placeholder="Valor de y">
                            <div class="precision-control">
                                <label for="transcendentalPrecision">Precisión:</label>
                                <input type="number" id="transcendentalPrecision" value="5" min="0" max="15">
                            </div>
                            <button onclick="app.calculateTranscendentalPartialDerivatives()">Calcular Derivadas Parciales</button>
                            <p id="transcendentalFunctionValueResult" class="result"></p>
                            <p id="transcendentalPartialDerivativeXResult" class="result"></p>
                            <p id="transcendentalPartialDerivativeYResult" class="result"></p>
                            <p id="transcendentalSecondPartialDerivativeXXResult" class="result"></p>
                            <p id="transcendentalSecondPartialDerivativeYYResult" class="result"></p>
                            <p id="transcendentalSecondPartialDerivativeXYResult" class="result"></p>
                        </div>

                        <!-- Derivadas parciales de funciones racionales trascendentes en dos variables -->
                        <div class="function-section">
                            <h3>Derivadas Parciales de Funciones Racionales Trascendentes en Dos Variables</h3>
                            <p>Ingresa el numerador y denominador de una función racional trascendente en dos variables (x, y) y evalúa la función, sus derivadas parciales de primer y segundo orden en los valores especificados de x e y.</p>
                            <input type="text" id="rationalNumeratorTranscendentalExpression" placeholder="Ingresa el numerador (por ejemplo: sin(x) + log(y))">
                            <input type="text" id="rationalDenominatorTranscendentalExpression" placeholder="Ingresa el denominador (por ejemplo: exp(x) + y^2)">
                            <input type="number" id="xValueRationalTranscendental" placeholder="Valor de x">
                            <input type="number" id="yValueRationalTranscendental" placeholder="Valor de y">
                            <div class="precision-control">
                                <label for="rationalTranscendentalPrecision">Precisión:</label>
                                <input type="number" id="rationalTranscendentalPrecision" value="5" min="0" max="15">
                            </div>
                            <button onclick="app.calculateRationalTranscendentalPartialDerivatives()">Calcular Derivadas Parciales</button>
                            <p id="rationalTranscendentalFunctionValueResult" class="result"></p>
                            <p id="rationalTranscendentalPartialDerivativeXResult" class="result"></p>
                            <p id="rationalTranscendentalPartialDerivativeYResult" class="result"></p>
                            <p id="rationalTranscendentalSecondPartialDerivativeXXResult" class="result"></p>
                            <p id="rationalTranscendentalSecondPartialDerivativeYYResult" class="result"></p>
                            <p id="rationalTranscendentalSecondPartialDerivativeXYResult" class="result"></p>
                        </div>

                        <!-- Derivadas parciales de funciones trascendentes racionales en tres variables -->
                        <div class="function-section">
                            <h3>Derivadas Parciales de Funciones Racionales Trascendentes en Tres Variables</h3>
                            <p>Ingresa el numerador y el denominador de una función racional trascendente en tres variables (x, y, z) y evalúa la función, sus derivadas parciales de primer y segundo orden en los valores especificados de x, y, y z.</p>
                            <input type="text" id="rationalNumeratorThreeVarExpression" placeholder="Ingresa el numerador (por ejemplo: sin(x) + log(y) + z)">
                            <input type="text" id="rationalDenominatorThreeVarExpression" placeholder="Ingresa el denominador (por ejemplo: exp(x) + y^2 + z^2)">
                            <input type="number" id="xValueThreeVar" placeholder="Valor de x">
                            <input type="number" id="yValueThreeVar" placeholder="Valor de y">
                            <input type="number" id="zValueThreeVar" placeholder="Valor de z">
                            <div class="precision-control">
                                <label for="threeVarPrecision">Precisión:</label>
                                <input type="number" id="threeVarPrecision" value="5" min="0" max="15">
                            </div>
                            <button onclick="app.calculateThreeVarRationalPartialDerivatives()">Calcular Derivadas Parciales</button>
                            <p id="threeVarFunctionValueResult" class="result"></p>
                            <p id="threeVarPartialDerivativeXResult" class="result"></p>
                            <p id="threeVarPartialDerivativeYResult" class="result"></p>
                            <p id="threeVarPartialDerivativeZResult" class="result"></p>
                            <p id="threeVarSecondPartialDerivativeXXResult" class="result"></p>
                            <p id="threeVarSecondPartialDerivativeYYResult" class="result"></p>
                            <p id="threeVarSecondPartialDerivativeZZResult" class="result"></p>
                            <p id="threeVarSecondPartialDerivativeXYResult" class="result"></p>
                            <p id="threeVarSecondPartialDerivativeXZResult" class="result"></p>
                            <p id="threeVarSecondPartialDerivativeYZResult" class="result"></p>
                        </div>

                        <!-- Regla de la cadena para funciones de dos variables -->
                        <div class="function-section">
                            <h3>Regla de la Cadena para Funciones de Dos Variables</h3>
                            <p>Ingresa una función de dos variables (x, y) donde x = g(t) y y = h(t). Evalúa la función y sus derivadas con respecto a t, incluyendo derivadas de primer y segundo orden.</p>
                            <input type="text" id="chainFunctionExpression" placeholder="Ingresa una función en (x, y), por ejemplo: sin(x) + y^2">
                            <input type="text" id="gFunctionExpression" placeholder="Ingresa la función g(t), por ejemplo: exp(t)">
                            <input type="text" id="hFunctionExpression" placeholder="Ingresa la función h(t), por ejemplo: t^2 + 3">
                            <input type="number" id="tValue" placeholder="Valor de t">
                            <div class="precision-control">
                                <label for="chainPrecision">Precisión:</label>
                                <input type="number" id="chainPrecision" value="5" min="0" max="15">
                            </div>
                            <button onclick="app.calculateChainRuleDerivatives()">Calcular Derivadas con la Regla de la Cadena</button>
                            <p id="chainFunctionValueResult" class="result"></p>
                            <p id="chainDerivativeFirstOrderResult" class="result"></p>
                            <p id="chainDerivativeSecondOrderResult" class="result"></p>
                        </div>


                        <!-- Regla de la cadena para funciones de dos variables (caso dos) -->
                        <div class="function-section">
                            <h3>Regla de la Cadena (Caso 2) para Funciones de Dos Variables</h3>
                            <p>Ingresa una función de dos variables (x, y) donde x = g(s, t) y y = h(s, t). Evalúa la función y sus derivadas con respecto a s y t, incluyendo derivadas de primer y segundo orden.</p>
                            <input type="text" id="chainFunctionCaseTwoExpression" placeholder="Ingresa una función en (x, y), por ejemplo: sin(x) + y^2">
                            <input type="text" id="gFunctionCaseTwoExpression" placeholder="Ingresa la función g(s, t), por ejemplo: exp(s + t)">
                            <input type="text" id="hFunctionCaseTwoExpression" placeholder="Ingresa la función h(s, t), por ejemplo: s^2 + t^3">
                            <input type="number" id="sValue" placeholder="Valor de s">
                            <input type="number" id="tValueCaseTwo" placeholder="Valor de t">
                            <div class="precision-control">
                                <label for="chainCaseTwoPrecision">Precisión:</label>
                                <input type="number" id="chainCaseTwoPrecision" value="5" min="0" max="15">
                            </div>
                            <button onclick="app.calculateChainRuleCaseTwo()">Calcular Derivadas con la Regla de la Cadena (Caso 2)</button>
                            <p id="chainCaseTwoFunctionValueResult" class="result"></p>
                            <p id="chainCaseTwoDerivativeFirstOrderSResult" class="result"></p>
                            <p id="chainCaseTwoDerivativeFirstOrderTResult" class="result"></p>
                            <p id="chainCaseTwoDerivativeSecondOrderSSResult" class="result"></p>
                            <p id="chainCaseTwoDerivativeSecondOrderTTResult" class="result"></p>
                            <p id="chainCaseTwoDerivativeSecondOrderSTResult" class="result"></p>
                        </div>

                        <!-- Generación de tabla de valores para funciones de dos variables -->
                        <div class="function-section">
                            <h3>Tabla de Valores para Funciones de Dos Variables</h3>
                            <p>Ingresa una función de dos variables (x, y), define los intervalos para x e y, y especifica el tamaño del paso para generar una tabla de valores.</p>
                            <input type="text" id="tableFunctionExpression" placeholder="Ingresa una función en (x, y), por ejemplo: sin(x) + y^2">
                            <input type="number" id="xStart" placeholder="Inicio del intervalo para x">
                            <input type="number" id="xEnd" placeholder="Fin del intervalo para x">
                            <input type="number" id="xStep" placeholder="Tamaño del paso para x">
                            <input type="number" id="yStart" placeholder="Inicio del intervalo para y">
                            <input type="number" id="yEnd" placeholder="Fin del intervalo para y">
                            <input type="number" id="yStep" placeholder="Tamaño del paso para y">
                            <div class="precision-control">
                                <label for="tablePrecision">Precisión:</label>
                                <input type="number" id="tablePrecision" value="5" min="0" max="15">
                            </div>
                            <button onclick="app.generateValueTable()">Generar Tabla de Valores</button>
                            <div id="tableResult"></div>
                        </div>

                        `;
                        break;

                        case 'ecuacionesDiferenciales':
            content = `
                <h2>Ecuaciones Diferenciales</h2>

                <!-- Solución de ecuaciones diferenciales lineales -->
                <div class="function-section">
                    <h3>Solución de Ecuaciones Diferenciales Lineales</h3>
                    <p>Ingresa las funciones P(x) y Q(x) para resolver la ecuación diferencial de la forma y' + P(x)y = Q(x). Define también una condición inicial.</p>
                    <input type="text" id="pFunctionExpression" placeholder="Ingresa la función P(x), por ejemplo: x^2">
                    <input type="text" id="qFunctionExpression" placeholder="Ingresa la función Q(x), por ejemplo: sin(x)">
                    <input type="number" id="initialX" placeholder="Valor inicial x₀">
                    <input type="number" id="initialY" placeholder="Valor inicial y(x₀)">
                    <div class="precision-control">
                        <label for="odePrecision">Precisión:</label>
                        <input type="number" id="odePrecision" value="5" min="0" max="15">
                    </div>
                    <button onclick="app.solveLinearODE()">Resolver Ecuación</button>
                    <p id="odeGeneralSolution" class="result"></p>
                    <p>Evaluar la solución en un valor específico de x:</p>
                    <input type="number" id="evaluationX" placeholder="Valor de x para evaluar la solución">
                    <button onclick="app.evaluateODESolution()">Evaluar Solución</button>
                    <p id="odeEvaluatedSolution" class="result"></p>
                </div>


                <div class="function-section">
                <h3>Solución Numérica de Ecuaciones Diferenciales Lineales</h3>
                <p>Ingresa las funciones P(x) y Q(x) para resolver la ecuación diferencial de la forma y' + P(x)y = Q(x) usando el método de Euler.</p>
                <input type="text" id="pFunctionExpression" placeholder="Ingresa la función P(x), por ejemplo: x^2">
                <input type="text" id="qFunctionExpression" placeholder="Ingresa la función Q(x), por ejemplo: sin(x)">
                <input type="number" id="initialX" placeholder="Valor inicial x₀">
                <input type="number" id="initialY" placeholder="Valor inicial y(x₀)">
                <input type="number" id="stepSize" placeholder="Tamaño del paso (h)">
                <input type="number" id="evaluationX" placeholder="Valor final de x para evaluar la solución">
                <div class="precision-control">
                    <label for="odePrecision">Precisión:</label>
                    <input type="number" id="odePrecision" value="5" min="0" max="15">
                </div>
                <button onclick="app.solveLinearODENumerically()">Resolver Numéricamente</button>
                <p id="odeNumericalSolution" class="result"></p>
            </div>
            `;
            break;

            case 'analisisNumerico':
            content = `
                <h2>Análisis Numérico</h2>
                <div class="function-section">
                    <h3>Solución Numérica con el Método de Euler Mejorado</h3>
                    <p>Ingresa las funciones P(x) y Q(x) para resolver la ecuación diferencial de la forma y' + P(x)y = Q(x) usando el método de Euler mejorado.</p>
                    <input type="text" id="pFunctionEulerImproved" placeholder="Ingresa la función P(x), por ejemplo: x^2">
                    <input type="text" id="qFunctionEulerImproved" placeholder="Ingresa la función Q(x), por ejemplo: sin(x)">
                    <input type="number" id="initialXEulerImproved" placeholder="Valor inicial x₀">
                    <input type="number" id="initialYEulerImproved" placeholder="Valor inicial y(x₀)">
                    <input type="number" id="stepSizeEulerImproved" placeholder="Tamaño del paso (h)">
                    <input type="number" id="evaluationXEulerImproved" placeholder="Valor final de x para evaluar la solución">
                    <div class="precision-control">
                        <label for="eulerImprovedPrecision">Precisión:</label>
                        <input type="number" id="eulerImprovedPrecision" value="5" min="0" max="15">
                    </div>
                    <button onclick="app.solveODEEulerImproved()">Resolver Numéricamente con Euler Mejorado</button>
                    <p id="eulerImprovedSolution" class="result"></p>
                </div>

                
                <!-- Método de Bisección para Aproximar Raíces Irracionales -->
                <div class="function-section">
                    <h3>Método de Bisección para Aproximar Raíces Irracionales</h3>
                    <p>Ingresa la función f(x) y el intervalo [a, b] donde existe una raíz irracional para aproximarla usando el método de bisección.</p>
                    <input type="text" id="bisectionFunction" placeholder="Ingresa la función f(x), por ejemplo: x^3 - 2">
                    <input type="number" id="bisectionA" placeholder="Valor inicial del intervalo a">
                    <input type="number" id="bisectionB" placeholder="Valor final del intervalo b">
                    <div class="precision-control">
                        <label for="bisectionTolerance">Tolerancia:</label>
                        <input type="number" id="bisectionTolerance" value="0.00001" min="0.000001" max="1" step="0.00001">
                    </div>
                    <button onclick="app.solveBisectionMethod()">Aproximar Raíz con Bisección</button>
                    <p id="bisectionSolution" class="result"></p>
                    <div id="bisectionTableContainer" class="function-section"></div>
                </div>


                <!-- Método de la Secante para Aproximar Raíces Irracionales -->
                <div class="function-section">
                    <h3>Método de la Secante para Aproximar Raíces Irracionales</h3>
                    <p>Ingresa la función f(x) y dos puntos iniciales x₀ y x₁ para aproximar la raíz usando el método de la secante.</p>
                    <input type="text" id="secantFunction" placeholder="Ingresa la función f(x), por ejemplo: x^3 - 2">
                    <input type="number" id="secantX0" placeholder="Punto inicial x₀">
                    <input type="number" id="secantX1" placeholder="Punto inicial x₁">
                    <div class="precision-control">
                        <label for="secantTolerance">Tolerancia:</label>
                        <input type="number" id="secantTolerance" value="0.00001" min="1e-10" step="0.00001">
                    </div>
                    <button onclick="app.solveSecantMethod()">Aproximar Raíz con la Secante</button>
                    <p id="secantSolution" class="result"></p>
                    <div id="secantTableContainer" class="function-section"></div>
                </div>


                <!-- Método de Newton-Raphson para Aproximar Raíces Irracionales -->
                <div class="function-section">
                    <h3>Método de Newton-Raphson para Aproximar Raíces Irracionales</h3>
                    <p>Ingresa la función f(x) y un punto inicial x₀ para aproximar la raíz usando el método de Newton-Raphson.</p>
                    <input type="text" id="newtonFunction" placeholder="Ingresa la función f(x), por ejemplo: x^3 - 2">
                    <input type="number" id="newtonX0" placeholder="Punto inicial x₀">
                    <div class="precision-control">
                        <label for="newtonTolerance">Tolerancia:</label>
                        <input type="number" id="newtonTolerance" value="0.00001" min="1e-10" step="0.00001">
                    </div>
                    <button onclick="app.solveNewtonRaphsonMethod()">Aproximar Raíz con Newton-Raphson</button>
                    <p id="newtonSolution" class="result"></p>
                    <div id="newtonTableContainer" class="function-section"></div>
                </div>


                <!-- Regla de Trapecios para Aproximar Integrales Definidas -->
                <div class="function-section">
                    <h3>Regla de Trapecios para Aproximar Integrales Definidas</h3>
                    <p>Ingresa la función f(x), el intervalo [a, b], y el número de trapecios para aproximar la integral definida.</p>
                    <input type="text" id="trapezoidFunction" placeholder="Ingresa la función f(x), por ejemplo: sin(x)">
                    <input type="number" id="trapezoidA" placeholder="Valor inicial del intervalo a">
                    <input type="number" id="trapezoidB" placeholder="Valor final del intervalo b">
                    <input type="number" id="numTrapezoids" placeholder="Número de trapecios">
                    <div class="precision-control">
                        <label for="trapezoidPrecision">Precisión:</label>
                        <input type="number" id="trapezoidPrecision" value="5" min="0" max="15">
                    </div>
                    <button onclick="app.solveTrapezoidRule()">Aproximar Integral con Regla de Trapecios</button>
                    <p id="trapezoidSolution" class="result"></p>
                </div>


                <!-- Regla de Simpson 1/3 para Aproximar Integrales Definidas -->
                <div class="function-section">
                    <h3>Regla de Simpson 1/3 para Aproximar Integrales Definidas</h3>
                    <p>Ingresa la función f(x), el intervalo [a, b], y el número de subintervalos (debe ser par) para aproximar la integral definida.</p>
                    <input type="text" id="simpsonFunction" placeholder="Ingresa la función f(x), por ejemplo: cos(x)">
                    <input type="number" id="simpsonA" placeholder="Valor inicial del intervalo a">
                    <input type="number" id="simpsonB" placeholder="Valor final del intervalo b">
                    <input type="number" id="numSimpsonIntervals" placeholder="Número de subintervalos (debe ser par)">
                    <div class="precision-control">
                        <label for="simpsonPrecision">Precisión:</label>
                        <input type="number" id="simpsonPrecision" value="5" min="0" max="15">
                    </div>
                    <button onclick="app.solveSimpsonRule()">Aproximar Integral con Regla de Simpson 1/3</button>
                    <p id="simpsonSolution" class="result"></p>
                </div>






            `;
            break;

        // Otros casos para otras herramientas...
        
        default:
            content = '<h2>Herramienta no implementada</h2><p>Esta herramienta aún no está disponible.</p>';
    }

    toolContent.innerHTML = content;
},


           


            evaluateFunction: function() {
                const expression = document.getElementById('functionExpression').value;
                const xValue = parseFloat(document.getElementById('xValue').value);
                const precision = parseInt(document.getElementById('polynomialPrecision').value);
                const resultElement = document.getElementById('polynomialResult');

                if (!expression) {
                    resultElement.textContent = 'Error: Por favor ingresa una expresión válida.';
                    return;
                }
                if (isNaN(xValue)) {
                    resultElement.textContent = 'Error: Por favor ingresa un valor numérico válido para x.';
                    return;
                }

                try {
                    const parsedExpression = math.parse(expression);
                    const compiledExpression = parsedExpression.compile();
                    const result = compiledExpression.evaluate({ x: xValue });
                    resultElement.textContent = `Resultado: ${result.toFixed(precision)}`;
                } catch (error) {
                    resultElement.textContent = 'Error: La expresión no se pudo evaluar. Por favor verifica la sintaxis.';
                }
            },

            evaluateRationalFunction: function() {
                const numerator = document.getElementById('numeratorExpression').value;
                const denominator = document.getElementById('denominatorExpression').value;
                const xValue = parseFloat(document.getElementById('xValueRational').value);
                const precision = parseInt(document.getElementById('rationalPrecision').value);
                const resultElement = document.getElementById('rationalResult');

                if (!numerator || !denominator) {
                    resultElement.textContent = 'Error: Por favor ingresa expresiones válidas para el numerador y el denominador.';
                    return;
                }
                if (isNaN(xValue)) {
                    resultElement.textContent = 'Error: Por favor ingresa un valor numérico válido para x.';
                    return;
                }

                try {
                    const parsedNumerator = math.parse(numerator);
                    const parsedDenominator = math.parse(denominator);
                    const compiledNumerator = parsedNumerator.compile();
                    const compiledDenominator = parsedDenominator.compile();
                    const numeratorValue = compiledNumerator.evaluate({ x: xValue });
                    const denominatorValue = compiledDenominator.evaluate({ x: xValue });

                    if (denominatorValue === 0) {
                        resultElement.textContent = 'Error: División por cero.';
                        return;
                    }

                    const result = numeratorValue / denominatorValue;
                    resultElement.textContent = `Resultado: ${result.toFixed(precision)}`;
                } catch (error) {
                    resultElement.textContent = 'Error: Las expresiones no se pudieron evaluar. Por favor verifica la sintaxis.';
                }
            },

            generateTable: function() {
                const expression = document.getElementById('tableFunctionExpression').value;
                const startInterval = parseFloat(document.getElementById('startInterval').value);
                const endInterval = parseFloat(document.getElementById('endInterval').value);
                const stepSize = parseFloat(document.getElementById('stepSize').value);
                const precision = parseInt(document.getElementById('tablePrecision').value);
                const resultElement = document.getElementById('tableResult');

                if (!expression) {
                    resultElement.innerHTML = 'Error: Por favor ingresa una expresión válida.';
                    return;
                }
                if (isNaN(startInterval) || isNaN(endInterval) || isNaN(stepSize) || stepSize <= 0) {
                    resultElement.innerHTML = 'Error: Por favor ingresa valores numéricos válidos para el intervalo y el tamaño del paso.';
                    return;
                }

                try {
                    const parsedExpression = math.parse(expression);
                    const compiledExpression = parsedExpression.compile();
                    let tableContent = `<table><thead><tr><th>x</th><th>f(x)</th></tr></thead><tbody>`;

                    for (let x = startInterval; x <= endInterval; x += stepSize) {
                        const y = compiledExpression.evaluate({ x: x });
                        tableContent += `<tr><td>${x.toFixed(precision)}</td><td>${y.toFixed(precision)}</td></tr>`;
                    }

                    tableContent += `</tbody></table>`;
                    resultElement.innerHTML = tableContent;
                } catch (error) {
                    resultElement.innerHTML = 'Error: La expresión no se pudo evaluar. Por favor verifica la sintaxis.';
                }
            },

            solveQuadraticEquation: function() {
                const a = parseFloat(document.getElementById('coefficientA').value);
                const b = parseFloat(document.getElementById('coefficientB').value);
                const c = parseFloat(document.getElementById('coefficientC').value);
                const precision = parseInt(document.getElementById('quadraticPrecision').value);
                const discriminantResult = document.getElementById('discriminantResult');
                const sqrtDiscriminantResult = document.getElementById('sqrtDiscriminantResult');
                const vertexResult = document.getElementById('vertexResult');
                const quadraticRootsResult = document.getElementById('quadraticRootsResult');

                if (isNaN(a) || isNaN(b) || isNaN(c)) {
                    discriminantResult.textContent = 'Error: Por favor ingresa valores numéricos válidos para A, B y C.';
                    return;
                }

                const discriminant = b * b - 4 * a * c;
                discriminantResult.textContent = `Discriminante (D): ${discriminant.toFixed(precision)}`;

                if (discriminant > 0) {
                    const sqrtD = Math.sqrt(discriminant);
                    sqrtDiscriminantResult.textContent = `Raíz del discriminante: ${sqrtD.toFixed(precision)}`;
                    const root1 = (-b + sqrtD) / (2 * a);
                    const root2 = (-b - sqrtD) / (2 * a);
                    quadraticRootsResult.textContent = `Raíces reales: x1 = ${root1.toFixed(precision)}, x2 = ${root2.toFixed(precision)}`;
                } else if (discriminant === 0) {
                    const root = -b / (2 * a);
                    sqrtDiscriminantResult.textContent = `Raíz del discriminante: 0`;
                    quadraticRootsResult.textContent = `Raíz única: x = ${root.toFixed(precision)}`;
                } else {
                    const sqrtD = Math.sqrt(-discriminant);
                    sqrtDiscriminantResult.textContent = `Raíz del discriminante: i * ${sqrtD.toFixed(precision)}`;
                    const realPart = -b / (2 * a);
                    const imaginaryPart = sqrtD / (2 * a);
                    quadraticRootsResult.textContent = `Raíces complejas: x1 = ${realPart.toFixed(precision)} + i * ${imaginaryPart.toFixed(precision)}, x2 = ${realPart.toFixed(precision)} - i * ${imaginaryPart.toFixed(precision)}`;
                }

                const vertexX = -b / (2 * a);
                const vertexY = (4 * a * c - b * b) / (4 * a);
                vertexResult.textContent = `Vértice: V(${vertexX.toFixed(precision)}, ${vertexY.toFixed(precision)})`;
            },

            calculateTrig: function() {
                const angle = parseFloat(document.getElementById('angle').value);
                const functionType = document.getElementById('trigFunction').value;
                const precision = parseInt(document.getElementById('trigPrecision').value);
                const resultElement = document.getElementById('trigResult');

                if (isNaN(angle)) {
                    resultElement.textContent = 'Por favor, ingresa un ángulo válido.';
                    return;
                }

                let result;
                const radians = angle * (Math.PI / 180);
                switch (functionType) {
                    case 'sin':
                        result = Math.sin(radians);
                        break;
                    case 'cos':
                        result = Math.cos(radians);
                        break;
                    case 'tan':
                        result = Math.tan(radians);
                        break;
                    case 'csc':
                        result = 1 / Math.sin(radians);
                        break;
                    case 'sec':
                        result = 1 / Math.cos(radians);
                        break;
                    case 'cot':
                        result = 1 / Math.tan(radians);
                        break;
                    default:
                        resultElement.textContent = 'Función no válida.';
                        return;
                }

                resultElement.textContent = `Resultado: ${result.toFixed(precision)}`;
            },

            solveSystem2x2: function() {
                const a11 = parseFloat(document.getElementById('system2x2A11').value);
                const a12 = parseFloat(document.getElementById('system2x2A12').value);
                const b1 = parseFloat(document.getElementById('system2x2B1').value);
                const a21 = parseFloat(document.getElementById('system2x2A21').value);
                const a22 = parseFloat(document.getElementById('system2x2A22').value);
                const b2 = parseFloat(document.getElementById('system2x2B2').value);
                const precision = parseInt(document.getElementById('system2x2Precision').value);
                const resultElement = document.getElementById('systemResult2x2');

                if (isNaN(a11) || isNaN(a12) || isNaN(b1) || isNaN(a21) || isNaN(a22) || isNaN(b2)) {
                    resultElement.textContent = 'Error: Por favor ingresa todos los valores numéricos del sistema.';
                    return;
                }

                const matrixA = [
                    [a11, a12],
                    [a21, a22]
                ];
                const matrixB = [b1, b2];

                try {
                    const solution = math.lusolve(matrixA, matrixB);
                    resultElement.textContent = `Solución: x1 = ${solution[0][0].toFixed(precision)}, x2 = ${solution[1][0].toFixed(precision)}`;
                } catch (error) {
                    resultElement.textContent = 'Error: No se pudo resolver el sistema.';
                }
            },

            solveSystem3x3: function() {
                const a11 = parseFloat(document.getElementById('system3x3A11').value);
                const a12 = parseFloat(document.getElementById('system3x3A12').value);
                const a13 = parseFloat(document.getElementById('system3x3A13').value);
                const b1 = parseFloat(document.getElementById('system3x3B1').value);
                const a21 = parseFloat(document.getElementById('system3x3A21').value);
                const a22 = parseFloat(document.getElementById('system3x3A22').value);
                const a23 = parseFloat(document.getElementById('system3x3A23').value);
                const b2 = parseFloat(document.getElementById('system3x3B2').value);
                const a31 = parseFloat(document.getElementById('system3x3A31').value);
                const a32 = parseFloat(document.getElementById('system3x3A32').value);
                const a33 = parseFloat(document.getElementById('system3x3A33').value);
                const b3 = parseFloat(document.getElementById('system3x3B3').value);
                const precision = parseInt(document.getElementById('system3x3Precision').value);
                const resultElement = document.getElementById('systemResult3x3');

                if (isNaN(a11) || isNaN(a12) || isNaN(a13) || isNaN(b1) ||
                    isNaN(a21) || isNaN(a22) || isNaN(a23) || isNaN(b2) ||
                    isNaN(a31) || isNaN(a32) || isNaN(a33) || isNaN(b3)) {
                    resultElement.textContent = 'Error: Por favor ingresa todos los valores numéricos del sistema.';
                    return;
                }

                const matrixA = [
                    [a11, a12, a13],
                    [a21, a22, a23],
                    [a31, a32, a33]
                ];
                const matrixB = [b1, b2, b3];

                try {
                    const solution = math.lusolve(matrixA, matrixB);
                    resultElement.textContent = `Solución: x1 = ${solution[0][0].toFixed(precision)}, x2 = ${solution[1][0].toFixed(precision)}, x3 = ${solution[2][0].toFixed(precision)}`;
                } catch (error) {
                    resultElement.textContent = 'Error: No se pudo resolver el sistema.';
                }
            },

            solveSystem4x4: function() {
                const a11 = parseFloat(document.getElementById('system4x4A11').value);
                const a12 = parseFloat(document.getElementById('system4x4A12').value);
                const a13 = parseFloat(document.getElementById('system4x4A13').value);
                const a14 = parseFloat(document.getElementById('system4x4A14').value);
                const b1 = parseFloat(document.getElementById('system4x4B1').value);
                const a21 = parseFloat(document.getElementById('system4x4A21').value);
                const a22 = parseFloat(document.getElementById('system4x4A22').value);
                const a23 = parseFloat(document.getElementById('system4x4A23').value);
                const a24 = parseFloat(document.getElementById('system4x4A24').value);
                const b2 = parseFloat(document.getElementById('system4x4B2').value);
                const a31 = parseFloat(document.getElementById('system4x4A31').value);
                const a32 = parseFloat(document.getElementById('system4x4A32').value);
                const a33 = parseFloat(document.getElementById('system4x4A33').value);
                const a34 = parseFloat(document.getElementById('system4x4A34').value);
                const b3 = parseFloat(document.getElementById('system4x4B3').value);
                const a41 = parseFloat(document.getElementById('system4x4A41').value);
                const a42 = parseFloat(document.getElementById('system4x4A42').value);
                const a43 = parseFloat(document.getElementById('system4x4A43').value);
                const a44 = parseFloat(document.getElementById('system4x4A44').value);
                const b4 = parseFloat(document.getElementById('system4x4B4').value);
                const precision = parseInt(document.getElementById('system4x4Precision').value);
                const resultElement = document.getElementById('systemResult4x4');

                if (isNaN(a11) || isNaN(a12) || isNaN(a13) || isNaN(a14) ||
                    isNaN(b1) || isNaN(a21) || isNaN(a22) || isNaN(a23) ||
                    isNaN(a24) || isNaN(b2) || isNaN(a31) || isNaN(a32) ||
                    isNaN(a33) || isNaN(a34) || isNaN(b3) || isNaN(a41) ||
                    isNaN(a42) || isNaN(a43) || isNaN(a44) || isNaN(b4)) {
                    resultElement.textContent = 'Error: Por favor ingresa todos los valores numéricos del sistema.';
                    return;
                }

                const matrixA = [
                    [a11, a12, a13, a14],
                    [a21, a22, a23, a24],
                    [a31, a32, a33, a34],
                    [a41, a42, a43, a44]
                ];
                const matrixB = [b1, b2, b3, b4];

                try {
                    const solution = math.lusolve(matrixA, matrixB);
                    resultElement.textContent = `Solución: x1 = ${solution[0][0].toFixed(precision)}, x2 = ${solution[1][0].toFixed(precision)}, x3 = ${solution[2][0].toFixed(precision)}, x4 = ${solution[3][0].toFixed(precision)}`;
                } catch (error) {
                    resultElement.textContent = 'Error: No se pudo resolver el sistema.';
                }
            },

            calculateDeterminant2x2: function() {
                const a11 = parseFloat(document.getElementById('matrixA11').value);
                const a12 = parseFloat(document.getElementById('matrixA12').value);
                const a21 = parseFloat(document.getElementById('matrixA21').value);
                const a22 = parseFloat(document.getElementById('matrixA22').value);
                const precision = parseInt(document.getElementById('determinant2x2Precision').value);
                const resultElement = document.getElementById('determinantResult2x2');

                if (isNaN(a11) || isNaN(a12) || isNaN(a21) || isNaN(a22)) {
                    resultElement.textContent = 'Error: Por favor ingresa todos los valores numéricos de la matriz.';
                    return;
                }

                const determinant = (a11 * a22) - (a12 * a21);
                resultElement.textContent = `Determinante: ${determinant.toFixed(precision)}`;
            },

            calculateDeterminant3x3: function() {
                const a11 = parseFloat(document.getElementById('matrix3x3A11').value);
                const a12 = parseFloat(document.getElementById('matrix3x3A12').value);
                const a13 = parseFloat(document.getElementById('matrix3x3A13').value);
                const a21 = parseFloat(document.getElementById('matrix3x3A21').value);
                const a22 = parseFloat(document.getElementById('matrix3x3A22').value);
                const a23 = parseFloat(document.getElementById('matrix3x3A23').value);
                const a31 = parseFloat(document.getElementById('matrix3x3A31').value);
                const a32 = parseFloat(document.getElementById('matrix3x3A32').value);
                const a33 = parseFloat(document.getElementById('matrix3x3A33').value);
                const precision = parseInt(document.getElementById('determinant3x3Precision').value);
                const resultElement = document.getElementById('determinantResult3x3');

                if (isNaN(a11) || isNaN(a12) || isNaN(a13) || isNaN(a21) || isNaN(a22) || isNaN(a23) || isNaN(a31) || isNaN(a32) || isNaN(a33)) {
                    resultElement.textContent = 'Error: Por favor ingresa todos los valores numéricos de la matriz.';
                    return;
                }

                const determinant = a11 * (a22 * a33 - a23 * a32) - a12 * (a21 * a33 - a23 * a31) + a13 * (a21 * a32 - a22 * a31);
                resultElement.textContent = `Determinante: ${determinant.toFixed(precision)}`;
            },

            calculateDeterminant4x4: function() {
                const a11 = parseFloat(document.getElementById('matrix4x4A11').value);
                const a12 = parseFloat(document.getElementById('matrix4x4A12').value);
                const a13 = parseFloat(document.getElementById('matrix4x4A13').value);
                const a14 = parseFloat(document.getElementById('matrix4x4A14').value);
                const a21 = parseFloat(document.getElementById('matrix4x4A21').value);
                const a22 = parseFloat(document.getElementById('matrix4x4A22').value);
                const a23 = parseFloat(document.getElementById('matrix4x4A23').value);
                const a24 = parseFloat(document.getElementById('matrix4x4A24').value);
                const a31 = parseFloat(document.getElementById('matrix4x4A31').value);
                const a32 = parseFloat(document.getElementById('matrix4x4A32').value);
                const a33 = parseFloat(document.getElementById('matrix4x4A33').value);
                const a34 = parseFloat(document.getElementById('matrix4x4A34').value);
                const a41 = parseFloat(document.getElementById('matrix4x4A41').value);
                const a42 = parseFloat(document.getElementById('matrix4x4A42').value);
                const a43 = parseFloat(document.getElementById('matrix4x4A43').value);
                const a44 = parseFloat(document.getElementById('matrix4x4A44').value);
                const precision = parseInt(document.getElementById('determinant4x4Precision').value);
                const resultElement = document.getElementById('determinantResult4x4');

                if (isNaN(a11) || isNaN(a12) || isNaN(a13) || isNaN(a14) ||
                    isNaN(a21) || isNaN(a22) || isNaN(a23) || isNaN(a24) ||
                    isNaN(a31) || isNaN(a32) || isNaN(a33) || isNaN(a34) ||
                    isNaN(a41) || isNaN(a42) || isNaN(a43) || isNaN(a44)) {
                    resultElement.textContent = 'Error: Por favor ingresa todos los valores numéricos de la matriz.';
                    return;
                }

                // Calculating the determinant of a 4x4 matrix is more complex, using math.js
                const matrix = [
                    [a11, a12, a13, a14],
                    [a21, a22, a23, a24],
                    [a31, a32, a33, a34],
                    [a41, a42, a43, a44]
                ];

                try {
                    const determinant = math.det(matrix);
                    resultElement.textContent = `Determinante: ${determinant.toFixed(precision)}`;
                } catch (error) {
                    resultElement.textContent = 'Error: No se pudo calcular el determinante.';
                }
            },

            calculateDerivative: function() {
                const functionExpression = document.getElementById('differentialFunctionExpression').value;
                const precision = parseInt(document.getElementById('differentialPrecision').value);
                const resultElement = document.getElementById('derivativeResult');

                if (!functionExpression) {
                    resultElement.textContent = 'Error: Por favor ingresa una función válida.';
                    return;
                }

                try {
                    const node = math.parse(functionExpression);
                    const derivative = math.derivative(node, 'x').toString();
                    resultElement.textContent = `Derivada de f(x): ${derivative}`;
                } catch (error) {
                    resultElement.textContent = 'Error: No se pudo calcular la derivada.';
                }
            },

            calculateSecondDerivative: function() {
                const functionExpression = document.getElementById('differentialFunctionExpression').value;
                const precision = parseInt(document.getElementById('differentialPrecision').value);
                const resultElement = document.getElementById('secondDerivativeResult');

                if (!functionExpression) {
                    resultElement.textContent = 'Error: Por favor ingresa una función válida.';
                    return;
                }

                try {
                    const node = math.parse(functionExpression);
                    const secondDerivative = math.derivative(math.derivative(node, 'x'), 'x').toString();
                    resultElement.textContent = `Segunda derivada de f(x): ${secondDerivative}`;
                } catch (error) {
                    resultElement.textContent = 'Error: No se pudo calcular la segunda derivada.';
                }
            },

            evaluateFunctionAndDerivative: function() {
                const functionExpression = document.getElementById('differentialFunctionExpression').value;
                const xValue = parseFloat(document.getElementById('xValueDifferential').value);
                const precision = parseInt(document.getElementById('differentialPrecision').value);
                const functionValueResultElement = document.getElementById('functionValueResult');
                const derivativeResultElement = document.getElementById('derivativeResult');
                const secondDerivativeResultElement = document.getElementById('secondDerivativeResult');

                if (!functionExpression || isNaN(xValue)) {
                    functionValueResultElement.textContent = 'Error: Por favor ingresa una función válida y un valor de x.';
                    return;
                }

                try {
                    const node = math.parse(functionExpression);
                    const compiledFunction = node.compile();
                    const scope = { x: xValue };
                    const functionValue = compiledFunction.evaluate(scope).toFixed(precision);
                    const derivativeNode = math.derivative(node, 'x');
                    const compiledDerivative = derivativeNode.compile();
                    const derivativeValue = compiledDerivative.evaluate(scope).toFixed(precision);
                    const secondDerivativeNode = math.derivative(derivativeNode, 'x');
                    const compiledSecondDerivative = secondDerivativeNode.compile();
                    const secondDerivativeValue = compiledSecondDerivative.evaluate(scope).toFixed(precision);

                    functionValueResultElement.textContent = `f(${xValue}) = ${functionValue}`;
                    derivativeResultElement.textContent = `f'(${xValue}) = ${derivativeValue}`;
                    secondDerivativeResultElement.textContent = `f''(${xValue}) = ${secondDerivativeValue}`;
                } catch (error) {
                    functionValueResultElement.textContent = 'Error: No se pudo evaluar la función.';
                    derivativeResultElement.textContent = 'Error: No se pudo evaluar la derivada.';
                    secondDerivativeResultElement.textContent = 'Error: No se pudo evaluar la segunda derivada.';
                }
            },


            calculateRationalDerivatives: function() {
                const numeratorExpression = document.getElementById('rationalNumeratorExpression').value;
                const denominatorExpression = document.getElementById('rationalDenominatorExpression').value;
                const xValue = parseFloat(document.getElementById('rationalXValue').value);
                const precision = parseInt(document.getElementById('rationalDerivativePrecision').value);
                const functionValueResultElement = document.getElementById('rationalFunctionValueResult');
                const firstDerivativeResultElement = document.getElementById('rationalFirstDerivativeResult');
                const secondDerivativeResultElement = document.getElementById('rationalSecondDerivativeResult');
            
                if (!numeratorExpression || !denominatorExpression || isNaN(xValue)) {
                    functionValueResultElement.textContent = 'Error: Por favor ingresa el numerador, el denominador, y el valor de x.';
                    return;
                }
            
                try {
                    // Definir las expresiones para el numerador y denominador
                    const numeratorNode = math.parse(numeratorExpression);
                    const denominatorNode = math.parse(denominatorExpression);
            
                    // Crear funciones a partir de las expresiones
                    const numeratorFn = numeratorNode.compile();
                    const denominatorFn = denominatorNode.compile();
            
                    // Evaluar la función original
                    const functionValue = numeratorFn.evaluate({ x: xValue }) / denominatorFn.evaluate({ x: xValue });
                    functionValueResultElement.textContent = `f(${xValue}) = ${functionValue.toFixed(precision)}`;
            
                    // Calcular la primera derivada usando la regla del cociente
                    const firstDerivativeNumerator = math.derivative(numeratorNode, 'x').toString() + '*' + denominatorExpression + ' - ' + numeratorExpression + '*' + math.derivative(denominatorNode, 'x').toString();
                    const firstDerivativeDenominator = `(${denominatorExpression})^2`;
                    const firstDerivativeExpression = `(${firstDerivativeNumerator}) / (${firstDerivativeDenominator})`;
                    const firstDerivativeNode = math.parse(firstDerivativeExpression);
                    const firstDerivativeFn = firstDerivativeNode.compile();
                    const firstDerivativeValue = firstDerivativeFn.evaluate({ x: xValue });
                    firstDerivativeResultElement.textContent = `f'(${xValue}) = ${firstDerivativeValue.toFixed(precision)}`;
            
                    // Calcular la segunda derivada (es un poco más complejo)
                    const dNumerator = math.derivative(firstDerivativeNode, 'x').toString();
                    const dDenominator = math.derivative(math.parse(denominatorExpression), 'x').toString();
                    const secondDerivativeExpression = math.derivative(firstDerivativeNode, 'x').toString();
                    const secondDerivativeNode = math.parse(secondDerivativeExpression);
                    const secondDerivativeFn = secondDerivativeNode.compile();
                    const secondDerivativeValue = secondDerivativeFn.evaluate({ x: xValue });
                    secondDerivativeResultElement.textContent = `f''(${xValue}) = ${secondDerivativeValue.toFixed(precision)}`;
            
                } catch (error) {
                    functionValueResultElement.textContent = 'Error: No se pudo calcular la función o sus derivadas.';
                    firstDerivativeResultElement.textContent = '';
                    secondDerivativeResultElement.textContent = '';
                }
            },





            calculateAreaUnderCurve: function() {
                const functionExpression = document.getElementById('integralFunctionExpression').value;
                const startInterval = parseFloat(document.getElementById('startIntervalIntegral').value);
                const endInterval = parseFloat(document.getElementById('endIntervalIntegral').value);
                const precision = parseInt(document.getElementById('integralPrecision').value);
                const resultElement = document.getElementById('integralResult');
            
                if (!functionExpression || isNaN(startInterval) || isNaN(endInterval)) {
                    resultElement.textContent = 'Error: Por favor ingresa una función válida y los límites del intervalo.';
                    return;
                }
            
                try {
                    const fn = math.parse(functionExpression).compile();
                    let area = 0;
                    const stepSize = 0.01; // Tamaño de paso para la aproximación numérica
                    for (let x = startInterval; x < endInterval; x += stepSize) {
                        area += fn.evaluate({ x: x }) * stepSize;
                    }
                    resultElement.textContent = `Área aproximada bajo la curva: ${area.toFixed(precision)}`;
                } catch (error) {
                    resultElement.textContent = 'Error: No se pudo calcular el área bajo la curva.';
                }
            },

            calculateRationalIntegral: function() {
                const functionExpression = document.getElementById('rationalFunctionExpression').value;
                const startInterval = parseFloat(document.getElementById('startIntervalRational').value);
                const endInterval = parseFloat(document.getElementById('endIntervalRational').value);
                const precision = parseInt(document.getElementById('rationalPrecision').value);
                const resultElement = document.getElementById('rationalIntegralResult');
            
                if (!functionExpression || isNaN(startInterval) || isNaN(endInterval)) {
                    resultElement.textContent = 'Error: Por favor ingresa una función válida y los límites del intervalo.';
                    return;
                }
            
                try {
                    const fn = math.parse(functionExpression).compile();
                    let area = 0;
                    const stepSize = 0.01; // Tamaño de paso para la aproximación numérica
            
                    for (let x = startInterval; x < endInterval; x += stepSize) {
                        area += fn.evaluate({ x: x }) * stepSize;
                    }
            
                    resultElement.textContent = `Integral aproximada: ${area.toFixed(precision)}`;
                } catch (error) {
                    resultElement.textContent = 'Error: No se pudo calcular la integral.';
                }
            },


            
             calculateRationalDerivatives: function() {
                const numeratorExpression = document.getElementById('rationalNumeratorExpression').value;
                const denominatorExpression = document.getElementById('rationalDenominatorExpression').value;
                const xValue = parseFloat(document.getElementById('rationalXValue').value);
                const precision = parseInt(document.getElementById('rationalDerivativePrecision').value);
                const functionValueResultElement = document.getElementById('rationalFunctionValueResult');
                const firstDerivativeResultElement = document.getElementById('rationalFirstDerivativeResult');
                const secondDerivativeResultElement = document.getElementById('rationalSecondDerivativeResult');
            
                    if (!numeratorExpression || !denominatorExpression || isNaN(xValue)) {
                        functionValueResultElement.textContent = 'Error: Por favor ingresa el numerador, el denominador, y el valor de x.';
                        return;
                    }
            
                    try {
                        const numeratorNode = math.parse(numeratorExpression);
                        const denominatorNode = math.parse(denominatorExpression);
                        const functionExpression = `(${numeratorExpression}) / (${denominatorExpression})`;
            
                        // Evaluar la función original
                        const fn = math.compile(functionExpression);
                        const functionValue = fn.evaluate({ x: xValue });
                        functionValueResultElement.textContent = `f(${xValue}) = ${functionValue.toFixed(precision)}`;
            
                        // Calcular la primera derivada
                        const firstDerivative = math.derivative(functionExpression, 'x');
                        const firstDerivativeValue = firstDerivative.evaluate({ x: xValue });
                        firstDerivativeResultElement.textContent = `f'(${xValue}) = ${firstDerivativeValue.toFixed(precision)}`;
            
                        // Calcular la segunda derivada
                        const secondDerivative = math.derivative(firstDerivative, 'x');
                        const secondDerivativeValue = secondDerivative.evaluate({ x: xValue });
                        secondDerivativeResultElement.textContent = `f''(${xValue}) = ${secondDerivativeValue.toFixed(precision)}`;
                    } catch (error) {
                        functionValueResultElement.textContent = 'Error: No se pudo calcular la función o sus derivadas.';
                        firstDerivativeResultElement.textContent = '';
                        secondDerivativeResultElement.textContent = '';
                    }
                },
            
                calculateTranscendentalDerivatives: function() {
                    const functionExpression = document.getElementById('transcendentalFunctionExpression').value;
                    const xValue = parseFloat(document.getElementById('transcendentalXValue').value);
                    const precision = parseInt(document.getElementById('transcendentalDerivativePrecision').value);
                    const functionValueResultElement = document.getElementById('transcendentalFunctionValueResult');
                    const firstDerivativeResultElement = document.getElementById('transcendentalFirstDerivativeResult');
                    const secondDerivativeResultElement = document.getElementById('transcendentalSecondDerivativeResult');
            
                    if (!functionExpression || isNaN(xValue)) {
                        functionValueResultElement.textContent = 'Error: Por favor ingresa la función y el valor de x.';
                        return;
                    }
            
                    try {
                        const fn = math.compile(functionExpression);
            
                        // Evaluar la función original
                        const functionValue = fn.evaluate({ x: xValue });
                        functionValueResultElement.textContent = `f(${xValue}) = ${functionValue.toFixed(precision)}`;
            
                        // Calcular la primera derivada
                        const firstDerivative = math.derivative(functionExpression, 'x');
                        const firstDerivativeValue = firstDerivative.evaluate({ x: xValue });
                        firstDerivativeResultElement.textContent = `f'(${xValue}) = ${firstDerivativeValue.toFixed(precision)}`;
            
                        // Calcular la segunda derivada
                        const secondDerivative = math.derivative(firstDerivative, 'x');
                        const secondDerivativeValue = secondDerivative.evaluate({ x: xValue });
                        secondDerivativeResultElement.textContent = `f''(${xValue}) = ${secondDerivativeValue.toFixed(precision)}`;
                    } catch (error) {
                        functionValueResultElement.textContent = 'Error: No se pudo calcular la función o sus derivadas.';
                        firstDerivativeResultElement.textContent = '';
                        secondDerivativeResultElement.textContent = '';
                    }
                },


                evaluateMultivariableFunction: function() {
                    const functionExpression = document.getElementById('multivariableFunctionExpression').value;
                    const xValue = parseFloat(document.getElementById('xValueMultivariable').value);
                    const yValue = parseFloat(document.getElementById('yValueMultivariable').value);
                    const precision = parseInt(document.getElementById('multivariablePrecision').value);
                    const resultElement = document.getElementById('multivariableFunctionResult');
                
                    if (!functionExpression || isNaN(xValue) || isNaN(yValue)) {
                        resultElement.textContent = 'Error: Por favor ingresa una función válida y valores numéricos para x e y.';
                        return;
                    }
                
                    try {
                        // Analizar y compilar la función ingresada
                        const fn = math.parse(functionExpression).compile();
                
                        // Evaluar la función con los valores especificados de x e y
                        const result = fn.evaluate({ x: xValue, y: yValue });
                
                        // Mostrar el resultado con la precisión indicada
                        resultElement.textContent = `f(${xValue}, ${yValue}) = ${result.toFixed(precision)}`;
                    } catch (error) {
                        resultElement.textContent = 'Error: No se pudo evaluar la función. Verifica la expresión ingresada.';
                    }
                },

                calculatePartialDerivatives: function() {
                    const functionExpression = document.getElementById('partialFunctionExpression').value;
                    const xValue = parseFloat(document.getElementById('xValuePartial').value);
                    const yValue = parseFloat(document.getElementById('yValuePartial').value);
                    const precision = parseInt(document.getElementById('partialPrecision').value);
                    const functionValueResultElement = document.getElementById('partialFunctionValueResult');
                    const partialDerivativeXResultElement = document.getElementById('partialDerivativeXResult');
                    const partialDerivativeYResultElement = document.getElementById('partialDerivativeYResult');
                    const secondPartialDerivativeXXResultElement = document.getElementById('secondPartialDerivativeXXResult');
                    const secondPartialDerivativeYYResultElement = document.getElementById('secondPartialDerivativeYYResult');
                    const secondPartialDerivativeXYResultElement = document.getElementById('secondPartialDerivativeXYResult');
                
                    if (!functionExpression || isNaN(xValue) || isNaN(yValue)) {
                        functionValueResultElement.textContent = 'Error: Por favor ingresa una función válida y valores numéricos para x e y.';
                        return;
                    }
                
                    try {
                        // Analizar y compilar la función ingresada
                        const node = math.parse(functionExpression);
                        const fn = node.compile();
                
                        // Evaluar la función en el punto especificado (x, y)
                        const functionValue = fn.evaluate({ x: xValue, y: yValue });
                        functionValueResultElement.textContent = `f(${xValue}, ${yValue}) = ${functionValue.toFixed(precision)}`;
                
                        // Calcular las derivadas parciales de primer orden con respecto a x e y
                        const partialDerivativeX = math.derivative(functionExpression, 'x');
                        const partialDerivativeY = math.derivative(functionExpression, 'y');
                        const partialDerivativeXValue = partialDerivativeX.evaluate({ x: xValue, y: yValue });
                        const partialDerivativeYValue = partialDerivativeY.evaluate({ x: xValue, y: yValue });
                        partialDerivativeXResultElement.textContent = `f_x(${xValue}, ${yValue}) = ${partialDerivativeXValue.toFixed(precision)}`;
                        partialDerivativeYResultElement.textContent = `f_y(${xValue}, ${yValue}) = ${partialDerivativeYValue.toFixed(precision)}`;
                
                        // Calcular las derivadas parciales de segundo orden
                        const secondPartialDerivativeXX = math.derivative(partialDerivativeX, 'x');
                        const secondPartialDerivativeYY = math.derivative(partialDerivativeY, 'y');
                        const secondPartialDerivativeXY = math.derivative(partialDerivativeX, 'y');
                        const secondPartialDerivativeXXValue = secondPartialDerivativeXX.evaluate({ x: xValue, y: yValue });
                        const secondPartialDerivativeYYValue = secondPartialDerivativeYY.evaluate({ x: xValue, y: yValue });
                        const secondPartialDerivativeXYValue = secondPartialDerivativeXY.evaluate({ x: xValue, y: yValue });
                        secondPartialDerivativeXXResultElement.textContent = `f_xx(${xValue}, ${yValue}) = ${secondPartialDerivativeXXValue.toFixed(precision)}`;
                        secondPartialDerivativeYYResultElement.textContent = `f_yy(${xValue}, ${yValue}) = ${secondPartialDerivativeYYValue.toFixed(precision)}`;
                        secondPartialDerivativeXYResultElement.textContent = `f_xy(${xValue}, ${yValue}) = ${secondPartialDerivativeXYValue.toFixed(precision)}`;
                    } catch (error) {
                        functionValueResultElement.textContent = 'Error: No se pudo calcular la función o sus derivadas.';
                        partialDerivativeXResultElement.textContent = '';
                        partialDerivativeYResultElement.textContent = '';
                        secondPartialDerivativeXXResultElement.textContent = '';
                        secondPartialDerivativeYYResultElement.textContent = '';
                        secondPartialDerivativeXYResultElement.textContent = '';
                    }
                },

                calculateTranscendentalPartialDerivatives: function() {
                    const functionExpression = document.getElementById('transcendentalFunctionExpression').value;
                    const xValue = parseFloat(document.getElementById('xValueTranscendental').value);
                    const yValue = parseFloat(document.getElementById('yValueTranscendental').value);
                    const precision = parseInt(document.getElementById('transcendentalPrecision').value);
                    const functionValueResultElement = document.getElementById('transcendentalFunctionValueResult');
                    const partialDerivativeXResultElement = document.getElementById('transcendentalPartialDerivativeXResult');
                    const partialDerivativeYResultElement = document.getElementById('transcendentalPartialDerivativeYResult');
                    const secondPartialDerivativeXXResultElement = document.getElementById('transcendentalSecondPartialDerivativeXXResult');
                    const secondPartialDerivativeYYResultElement = document.getElementById('transcendentalSecondPartialDerivativeYYResult');
                    const secondPartialDerivativeXYResultElement = document.getElementById('transcendentalSecondPartialDerivativeXYResult');
                
                    if (!functionExpression || isNaN(xValue) || isNaN(yValue)) {
                        functionValueResultElement.textContent = 'Error: Por favor ingresa una función válida y valores numéricos para x e y.';
                        return;
                    }
                
                    try {
                        // Compilar la función ingresada
                        const fn = math.compile(functionExpression);
                
                        // Evaluar la función en el punto especificado (x, y)
                        const functionValue = fn.evaluate({ x: xValue, y: yValue });
                        functionValueResultElement.textContent = `f(${xValue}, ${yValue}) = ${functionValue.toFixed(precision)}`;
                
                        // Calcular las derivadas parciales de primer orden con respecto a x e y
                        const partialDerivativeX = math.derivative(functionExpression, 'x');
                        const partialDerivativeY = math.derivative(functionExpression, 'y');
                        const partialDerivativeXValue = partialDerivativeX.evaluate({ x: xValue, y: yValue });
                        const partialDerivativeYValue = partialDerivativeY.evaluate({ x: xValue, y: yValue });
                        partialDerivativeXResultElement.textContent = `f_x(${xValue}, ${yValue}) = ${partialDerivativeXValue.toFixed(precision)}`;
                        partialDerivativeYResultElement.textContent = `f_y(${xValue}, ${yValue}) = ${partialDerivativeYValue.toFixed(precision)}`;
                
                        // Calcular las derivadas parciales de segundo orden
                        const secondPartialDerivativeXX = math.derivative(partialDerivativeX, 'x');
                        const secondPartialDerivativeYY = math.derivative(partialDerivativeY, 'y');
                        const secondPartialDerivativeXY = math.derivative(partialDerivativeX, 'y');
                        const secondPartialDerivativeXXValue = secondPartialDerivativeXX.evaluate({ x: xValue, y: yValue });
                        const secondPartialDerivativeYYValue = secondPartialDerivativeYY.evaluate({ x: xValue, y: yValue });
                        const secondPartialDerivativeXYValue = secondPartialDerivativeXY.evaluate({ x: xValue, y: yValue });
                        secondPartialDerivativeXXResultElement.textContent = `f_xx(${xValue}, ${yValue}) = ${secondPartialDerivativeXXValue.toFixed(precision)}`;
                        secondPartialDerivativeYYResultElement.textContent = `f_yy(${xValue}, ${yValue}) = ${secondPartialDerivativeYYValue.toFixed(precision)}`;
                        secondPartialDerivativeXYResultElement.textContent = `f_xy(${xValue}, ${yValue}) = ${secondPartialDerivativeXYValue.toFixed(precision)}`;
                    } catch (error) {
                        functionValueResultElement.textContent = 'Error: No se pudo calcular la función o sus derivadas.';
                        partialDerivativeXResultElement.textContent = '';
                        partialDerivativeYResultElement.textContent = '';
                        secondPartialDerivativeXXResultElement.textContent = '';
                        secondPartialDerivativeYYResultElement.textContent = '';
                        secondPartialDerivativeXYResultElement.textContent = '';
                    }
                },

                calculateRationalTranscendentalPartialDerivatives: function() {
                    const numeratorExpression = document.getElementById('rationalNumeratorTranscendentalExpression').value;
                    const denominatorExpression = document.getElementById('rationalDenominatorTranscendentalExpression').value;
                    const xValue = parseFloat(document.getElementById('xValueRationalTranscendental').value);
                    const yValue = parseFloat(document.getElementById('yValueRationalTranscendental').value);
                    const precision = parseInt(document.getElementById('rationalTranscendentalPrecision').value);
                    const functionValueResultElement = document.getElementById('rationalTranscendentalFunctionValueResult');
                    const partialDerivativeXResultElement = document.getElementById('rationalTranscendentalPartialDerivativeXResult');
                    const partialDerivativeYResultElement = document.getElementById('rationalTranscendentalPartialDerivativeYResult');
                    const secondPartialDerivativeXXResultElement = document.getElementById('rationalTranscendentalSecondPartialDerivativeXXResult');
                    const secondPartialDerivativeYYResultElement = document.getElementById('rationalTranscendentalSecondPartialDerivativeYYResult');
                    const secondPartialDerivativeXYResultElement = document.getElementById('rationalTranscendentalSecondPartialDerivativeXYResult');
                
                    if (!numeratorExpression || !denominatorExpression || isNaN(xValue) || isNaN(yValue)) {
                        functionValueResultElement.textContent = 'Error: Por favor ingresa el numerador, el denominador y valores numéricos para x e y.';
                        return;
                    }
                
                    try {
                        // Crear la expresión racional trascendental
                        const functionExpression = `(${numeratorExpression}) / (${denominatorExpression})`;
                
                        // Compilar la función
                        const fn = math.compile(functionExpression);
                
                        // Evaluar la función en el punto especificado (x, y)
                        const functionValue = fn.evaluate({ x: xValue, y: yValue });
                        functionValueResultElement.textContent = `f(${xValue}, ${yValue}) = ${functionValue.toFixed(precision)}`;
                
                        // Calcular las derivadas parciales de primer orden con respecto a x e y
                        const partialDerivativeX = math.derivative(functionExpression, 'x');
                        const partialDerivativeY = math.derivative(functionExpression, 'y');
                        const partialDerivativeXValue = partialDerivativeX.evaluate({ x: xValue, y: yValue });
                        const partialDerivativeYValue = partialDerivativeY.evaluate({ x: xValue, y: yValue });
                        partialDerivativeXResultElement.textContent = `f_x(${xValue}, ${yValue}) = ${partialDerivativeXValue.toFixed(precision)}`;
                        partialDerivativeYResultElement.textContent = `f_y(${xValue}, ${yValue}) = ${partialDerivativeYValue.toFixed(precision)}`;
                
                        // Calcular las derivadas parciales de segundo orden
                        const secondPartialDerivativeXX = math.derivative(partialDerivativeX, 'x');
                        const secondPartialDerivativeYY = math.derivative(partialDerivativeY, 'y');
                        const secondPartialDerivativeXY = math.derivative(partialDerivativeX, 'y');
                        const secondPartialDerivativeXXValue = secondPartialDerivativeXX.evaluate({ x: xValue, y: yValue });
                        const secondPartialDerivativeYYValue = secondPartialDerivativeYY.evaluate({ x: xValue, y: yValue });
                        const secondPartialDerivativeXYValue = secondPartialDerivativeXY.evaluate({ x: xValue, y: yValue });
                        secondPartialDerivativeXXResultElement.textContent = `f_xx(${xValue}, ${yValue}) = ${secondPartialDerivativeXXValue.toFixed(precision)}`;
                        secondPartialDerivativeYYResultElement.textContent = `f_yy(${xValue}, ${yValue}) = ${secondPartialDerivativeYYValue.toFixed(precision)}`;
                        secondPartialDerivativeXYResultElement.textContent = `f_xy(${xValue}, ${yValue}) = ${secondPartialDerivativeXYValue.toFixed(precision)}`;
                    } catch (error) {
                        functionValueResultElement.textContent = 'Error: No se pudo calcular la función o sus derivadas.';
                        partialDerivativeXResultElement.textContent = '';
                        partialDerivativeYResultElement.textContent = '';
                        secondPartialDerivativeXXResultElement.textContent = '';
                        secondPartialDerivativeYYResultElement.textContent = '';
                        secondPartialDerivativeXYResultElement.textContent = '';
                    }
                },


                calculateThreeVarRationalPartialDerivatives: function() {
                    const numeratorExpression = document.getElementById('rationalNumeratorThreeVarExpression').value;
                    const denominatorExpression = document.getElementById('rationalDenominatorThreeVarExpression').value;
                    const xValue = parseFloat(document.getElementById('xValueThreeVar').value);
                    const yValue = parseFloat(document.getElementById('yValueThreeVar').value);
                    const zValue = parseFloat(document.getElementById('zValueThreeVar').value);
                    const precision = parseInt(document.getElementById('threeVarPrecision').value);
                    const functionValueResultElement = document.getElementById('threeVarFunctionValueResult');
                    const partialDerivativeXResultElement = document.getElementById('threeVarPartialDerivativeXResult');
                    const partialDerivativeYResultElement = document.getElementById('threeVarPartialDerivativeYResult');
                    const partialDerivativeZResultElement = document.getElementById('threeVarPartialDerivativeZResult');
                    const secondPartialDerivativeXXResultElement = document.getElementById('threeVarSecondPartialDerivativeXXResult');
                    const secondPartialDerivativeYYResultElement = document.getElementById('threeVarSecondPartialDerivativeYYResult');
                    const secondPartialDerivativeZZResultElement = document.getElementById('threeVarSecondPartialDerivativeZZResult');
                    const secondPartialDerivativeXYResultElement = document.getElementById('threeVarSecondPartialDerivativeXYResult');
                    const secondPartialDerivativeXZResultElement = document.getElementById('threeVarSecondPartialDerivativeXZResult');
                    const secondPartialDerivativeYZResultElement = document.getElementById('threeVarSecondPartialDerivativeYZResult');
                
                    if (!numeratorExpression || !denominatorExpression || isNaN(xValue) || isNaN(yValue) || isNaN(zValue)) {
                        functionValueResultElement.textContent = 'Error: Por favor ingresa el numerador, el denominador y valores numéricos para x, y, y z.';
                        return;
                    }
                
                    try {
                        // Crear la expresión racional trascendental
                        const functionExpression = `(${numeratorExpression}) / (${denominatorExpression})`;
                
                        // Compilar la función
                        const fn = math.compile(functionExpression);
                
                        // Evaluar la función en el punto especificado (x, y, z)
                        const functionValue = fn.evaluate({ x: xValue, y: yValue, z: zValue });
                        functionValueResultElement.textContent = `f(${xValue}, ${yValue}, ${zValue}) = ${functionValue.toFixed(precision)}`;
                
                        // Calcular las derivadas parciales de primer orden
                        const partialDerivativeX = math.derivative(functionExpression, 'x');
                        const partialDerivativeY = math.derivative(functionExpression, 'y');
                        const partialDerivativeZ = math.derivative(functionExpression, 'z');
                        const partialDerivativeXValue = partialDerivativeX.evaluate({ x: xValue, y: yValue, z: zValue });
                        const partialDerivativeYValue = partialDerivativeY.evaluate({ x: xValue, y: yValue, z: zValue });
                        const partialDerivativeZValue = partialDerivativeZ.evaluate({ x: xValue, y: yValue, z: zValue });
                        partialDerivativeXResultElement.textContent = `f_x(${xValue}, ${yValue}, ${zValue}) = ${partialDerivativeXValue.toFixed(precision)}`;
                        partialDerivativeYResultElement.textContent = `f_y(${xValue}, ${yValue}, ${zValue}) = ${partialDerivativeYValue.toFixed(precision)}`;
                        partialDerivativeZResultElement.textContent = `f_z(${xValue}, ${yValue}, ${zValue}) = ${partialDerivativeZValue.toFixed(precision)}`;
                
                        // Calcular las derivadas parciales de segundo orden
                        const secondPartialDerivativeXX = math.derivative(partialDerivativeX, 'x');
                        const secondPartialDerivativeYY = math.derivative(partialDerivativeY, 'y');
                        const secondPartialDerivativeZZ = math.derivative(partialDerivativeZ, 'z');
                        const secondPartialDerivativeXY = math.derivative(partialDerivativeX, 'y');
                        const secondPartialDerivativeXZ = math.derivative(partialDerivativeX, 'z');
                        const secondPartialDerivativeYZ = math.derivative(partialDerivativeY, 'z');
                        const secondPartialDerivativeXXValue = secondPartialDerivativeXX.evaluate({ x: xValue, y: yValue, z: zValue });
                        const secondPartialDerivativeYYValue = secondPartialDerivativeYY.evaluate({ x: xValue, y: yValue, z: zValue });
                        const secondPartialDerivativeZZValue = secondPartialDerivativeZZ.evaluate({ x: xValue, y: yValue, z: zValue });
                        const secondPartialDerivativeXYValue = secondPartialDerivativeXY.evaluate({ x: xValue, y: yValue, z: zValue });
                        const secondPartialDerivativeXZValue = secondPartialDerivativeXZ.evaluate({ x: xValue, y: yValue, z: zValue });
                        const secondPartialDerivativeYZValue = secondPartialDerivativeYZ.evaluate({ x: xValue, y: yValue, z: zValue });
                        secondPartialDerivativeXXResultElement.textContent = `f_xx(${xValue}, ${yValue}, ${zValue}) = ${secondPartialDerivativeXXValue.toFixed(precision)}`;
                        secondPartialDerivativeYYResultElement.textContent = `f_yy(${xValue}, ${yValue}, ${zValue}) = ${secondPartialDerivativeYYValue.toFixed(precision)}`;
                        secondPartialDerivativeZZResultElement.textContent = `f_zz(${xValue}, ${yValue}, ${zValue}) = ${secondPartialDerivativeZZValue.toFixed(precision)}`;
                        secondPartialDerivativeXYResultElement.textContent = `f_xy(${xValue}, ${yValue}, ${zValue}) = ${secondPartialDerivativeXYValue.toFixed(precision)}`;
                        secondPartialDerivativeXZResultElement.textContent = `f_xz(${xValue}, ${yValue}, ${zValue}) = ${secondPartialDerivativeXZValue.toFixed(precision)}`;
                        secondPartialDerivativeYZResultElement.textContent = `f_yz(${xValue}, ${yValue}, ${zValue}) = ${secondPartialDerivativeYZValue.toFixed(precision)}`;
                    } catch (error) {
                        functionValueResultElement.textContent = 'Error: No se pudo calcular la función o sus derivadas.';
                        partialDerivativeXResultElement.textContent = '';
                        partialDerivativeYResultElement.textContent = '';
                        partialDerivativeZResultElement.textContent = '';
                        secondPartialDerivativeXXResultElement.textContent = '';
                        secondPartialDerivativeYYResultElement.textContent = '';
                        secondPartialDerivativeZZResultElement.textContent = '';
                        secondPartialDerivativeXYResultElement.textContent = '';
                        secondPartialDerivativeXZResultElement.textContent = '';
                        secondPartialDerivativeYZResultElement.textContent = '';
                    }
                },

                calculateChainRuleDerivatives: function() {
                    const functionExpression = document.getElementById('chainFunctionExpression').value;
                    const gExpression = document.getElementById('gFunctionExpression').value;
                    const hExpression = document.getElementById('hFunctionExpression').value;
                    const tValue = parseFloat(document.getElementById('tValue').value);
                    const precision = parseInt(document.getElementById('chainPrecision').value);
                    const functionValueResultElement = document.getElementById('chainFunctionValueResult');
                    const derivativeFirstOrderResultElement = document.getElementById('chainDerivativeFirstOrderResult');
                    const derivativeSecondOrderResultElement = document.getElementById('chainDerivativeSecondOrderResult');
                
                    if (!functionExpression || !gExpression || !hExpression || isNaN(tValue)) {
                        functionValueResultElement.textContent = 'Error: Por favor ingresa todas las funciones y un valor para t.';
                        return;
                    }
                
                    try {
                        // Evaluar g(t) y h(t)
                        const gCompiled = math.compile(gExpression);
                        const hCompiled = math.compile(hExpression);
                        const xValue = gCompiled.evaluate({ t: tValue });
                        const yValue = hCompiled.evaluate({ t: tValue });
                
                        // Compilar la función f(x, y)
                        const fn = math.compile(functionExpression);
                
                        // Evaluar la función f(x, y) en el punto (x, y)
                        const functionValue = fn.evaluate({ x: xValue, y: yValue });
                        functionValueResultElement.textContent = `f(x, y) en t=${tValue} es ${functionValue.toFixed(precision)}`;
                
                        // Calcular las derivadas parciales de f con respecto a x e y
                        const partialDerivativeX = math.derivative(functionExpression, 'x');
                        const partialDerivativeY = math.derivative(functionExpression, 'y');
                        
                        // Evaluar las derivadas parciales en el punto (x, y)
                        const partialDerivativeXValue = partialDerivativeX.evaluate({ x: xValue, y: yValue });
                        const partialDerivativeYValue = partialDerivativeY.evaluate({ x: xValue, y: yValue });
                
                        // Evaluar g'(t) y h'(t)
                        const gDerivative = math.derivative(gExpression, 't');
                        const hDerivative = math.derivative(hExpression, 't');
                        const gDerivativeValue = gDerivative.evaluate({ t: tValue });
                        const hDerivativeValue = hDerivative.evaluate({ t: tValue });
                
                        // Calcular la derivada de primer orden de f con respecto a t usando la regla de la cadena
                        const firstOrderDerivative = partialDerivativeXValue * gDerivativeValue + partialDerivativeYValue * hDerivativeValue;
                        derivativeFirstOrderResultElement.textContent = `f'(t) en t=${tValue} es ${firstOrderDerivative.toFixed(precision)}`;
                
                        // Calcular las segundas derivadas parciales de f con respecto a x e y
                        const secondPartialDerivativeXX = math.derivative(partialDerivativeX, 'x');
                        const secondPartialDerivativeYY = math.derivative(partialDerivativeY, 'y');
                        const secondPartialDerivativeXY = math.derivative(partialDerivativeX, 'y');
                        const secondPartialDerivativeXXValue = secondPartialDerivativeXX.evaluate({ x: xValue, y: yValue });
                        const secondPartialDerivativeYYValue = secondPartialDerivativeYY.evaluate({ x: xValue, y: yValue });
                        const secondPartialDerivativeXYValue = secondPartialDerivativeXY.evaluate({ x: xValue, y: yValue });
                
                        // Evaluar g''(t) y h''(t)
                        const gSecondDerivative = math.derivative(gDerivative, 't');
                        const hSecondDerivative = math.derivative(hDerivative, 't');
                        const gSecondDerivativeValue = gSecondDerivative.evaluate({ t: tValue });
                        const hSecondDerivativeValue = hSecondDerivative.evaluate({ t: tValue });
                
                        // Calcular la derivada de segundo orden de f con respecto a t usando la regla de la cadena
                        const secondOrderDerivative =
                            secondPartialDerivativeXXValue * Math.pow(gDerivativeValue, 2) +
                            secondPartialDerivativeYYValue * Math.pow(hDerivativeValue, 2) +
                            2 * secondPartialDerivativeXYValue * gDerivativeValue * hDerivativeValue +
                            partialDerivativeXValue * gSecondDerivativeValue +
                            partialDerivativeYValue * hSecondDerivativeValue;
                        
                        derivativeSecondOrderResultElement.textContent = `f''(t) en t=${tValue} es ${secondOrderDerivative.toFixed(precision)}`;
                
                    } catch (error) {
                        functionValueResultElement.textContent = 'Error: No se pudo calcular la función o sus derivadas.';
                        derivativeFirstOrderResultElement.textContent = '';
                        derivativeSecondOrderResultElement.textContent = '';
                    }
                },

                calculateChainRuleCaseTwo: function() {
                    const functionExpression = document.getElementById('chainFunctionCaseTwoExpression').value;
                    const gExpression = document.getElementById('gFunctionCaseTwoExpression').value;
                    const hExpression = document.getElementById('hFunctionCaseTwoExpression').value;
                    const sValue = parseFloat(document.getElementById('sValue').value);
                    const tValue = parseFloat(document.getElementById('tValueCaseTwo').value);
                    const precision = parseInt(document.getElementById('chainCaseTwoPrecision').value);
                    const functionValueResultElement = document.getElementById('chainCaseTwoFunctionValueResult');
                    const derivativeFirstOrderSResultElement = document.getElementById('chainCaseTwoDerivativeFirstOrderSResult');
                    const derivativeFirstOrderTResultElement = document.getElementById('chainCaseTwoDerivativeFirstOrderTResult');
                    const derivativeSecondOrderSSResultElement = document.getElementById('chainCaseTwoDerivativeSecondOrderSSResult');
                    const derivativeSecondOrderTTResultElement = document.getElementById('chainCaseTwoDerivativeSecondOrderTTResult');
                    const derivativeSecondOrderSTResultElement = document.getElementById('chainCaseTwoDerivativeSecondOrderSTResult');
                
                    if (!functionExpression || !gExpression || !hExpression || isNaN(sValue) || isNaN(tValue)) {
                        functionValueResultElement.textContent = 'Error: Por favor ingresa todas las funciones y valores numéricos para s y t.';
                        return;
                    }
                
                    try {
                        // Evaluar g(s, t) y h(s, t)
                        const gCompiled = math.compile(gExpression);
                        const hCompiled = math.compile(hExpression);
                        const xValue = gCompiled.evaluate({ s: sValue, t: tValue });
                        const yValue = hCompiled.evaluate({ s: sValue, t: tValue });
                
                        // Compilar la función f(x, y)
                        const fn = math.compile(functionExpression);
                
                        // Evaluar la función f(x, y) en el punto (x, y)
                        const functionValue = fn.evaluate({ x: xValue, y: yValue });
                        functionValueResultElement.textContent = `f(x, y) en (s=${sValue}, t=${tValue}) es ${functionValue.toFixed(precision)}`;
                
                        // Calcular las derivadas parciales de f con respecto a x e y
                        const partialDerivativeX = math.derivative(functionExpression, 'x');
                        const partialDerivativeY = math.derivative(functionExpression, 'y');
                        
                        // Evaluar las derivadas parciales en el punto (x, y)
                        const partialDerivativeXValue = partialDerivativeX.evaluate({ x: xValue, y: yValue });
                        const partialDerivativeYValue = partialDerivativeY.evaluate({ x: xValue, y: yValue });
                
                        // Evaluar g_s, g_t, h_s, h_t
                        const gDerivativeS = math.derivative(gExpression, 's');
                        const gDerivativeT = math.derivative(gExpression, 't');
                        const hDerivativeS = math.derivative(hExpression, 's');
                        const hDerivativeT = math.derivative(hExpression, 't');
                        const gDerivativeSValue = gDerivativeS.evaluate({ s: sValue, t: tValue });
                        const gDerivativeTValue = gDerivativeT.evaluate({ s: sValue, t: tValue });
                        const hDerivativeSValue = hDerivativeS.evaluate({ s: sValue, t: tValue });
                        const hDerivativeTValue = hDerivativeT.evaluate({ s: sValue, t: tValue });
                
                        // Calcular las derivadas de primer orden con respecto a s y t usando la regla de la cadena
                        const firstOrderDerivativeS = partialDerivativeXValue * gDerivativeSValue + partialDerivativeYValue * hDerivativeSValue;
                        const firstOrderDerivativeT = partialDerivativeXValue * gDerivativeTValue + partialDerivativeYValue * hDerivativeTValue;
                        derivativeFirstOrderSResultElement.textContent = `f_s en (s=${sValue}, t=${tValue}) es ${firstOrderDerivativeS.toFixed(precision)}`;
                        derivativeFirstOrderTResultElement.textContent = `f_t en (s=${sValue}, t=${tValue}) es ${firstOrderDerivativeT.toFixed(precision)}`;
                
                        // Calcular las segundas derivadas parciales de f con respecto a x e y
                        const secondPartialDerivativeXX = math.derivative(partialDerivativeX, 'x');
                        const secondPartialDerivativeYY = math.derivative(partialDerivativeY, 'y');
                        const secondPartialDerivativeXY = math.derivative(partialDerivativeX, 'y');
                        const secondPartialDerivativeXXValue = secondPartialDerivativeXX.evaluate({ x: xValue, y: yValue });
                        const secondPartialDerivativeYYValue = secondPartialDerivativeYY.evaluate({ x: xValue, y: yValue });
                        const secondPartialDerivativeXYValue = secondPartialDerivativeXY.evaluate({ x: xValue, y: yValue });
                
                        // Evaluar g'' y h'' con respecto a s y t
                        const gSecondDerivativeSS = math.derivative(gDerivativeS, 's');
                        const gSecondDerivativeTT = math.derivative(gDerivativeT, 't');
                        const gSecondDerivativeST = math.derivative(gDerivativeS, 't');
                        const hSecondDerivativeSS = math.derivative(hDerivativeS, 's');
                        const hSecondDerivativeTT = math.derivative(hDerivativeT, 't');
                        const hSecondDerivativeST = math.derivative(hDerivativeS, 't');
                        const gSecondDerivativeSSValue = gSecondDerivativeSS.evaluate({ s: sValue, t: tValue });
                        const gSecondDerivativeTTValue = gSecondDerivativeTT.evaluate({ s: sValue, t: tValue });
                        const gSecondDerivativeSTValue = gSecondDerivativeST.evaluate({ s: sValue, t: tValue });
                        const hSecondDerivativeSSValue = hSecondDerivativeSS.evaluate({ s: sValue, t: tValue });
                        const hSecondDerivativeTTValue = hSecondDerivativeTT.evaluate({ s: sValue, t: tValue });
                        const hSecondDerivativeSTValue = hSecondDerivativeST.evaluate({ s: sValue, t: tValue });
                
                        // Calcular la derivada de segundo orden con respecto a s y t usando la regla de la cadena
                        const secondOrderDerivativeSS =
                            secondPartialDerivativeXXValue * Math.pow(gDerivativeSValue, 2) +
                            secondPartialDerivativeYYValue * Math.pow(hDerivativeSValue, 2) +
                            2 * secondPartialDerivativeXYValue * gDerivativeSValue * hDerivativeSValue +
                            partialDerivativeXValue * gSecondDerivativeSSValue +
                            partialDerivativeYValue * hSecondDerivativeSSValue;
                
                        const secondOrderDerivativeTT =
                            secondPartialDerivativeXXValue * Math.pow(gDerivativeTValue, 2) +
                            secondPartialDerivativeYYValue * Math.pow(hDerivativeTValue, 2) +
                            2 * secondPartialDerivativeXYValue * gDerivativeTValue * hDerivativeTValue +
                            partialDerivativeXValue * gSecondDerivativeTTValue +
                            partialDerivativeYValue * hSecondDerivativeTTValue;
                
                        const secondOrderDerivativeST =
                            secondPartialDerivativeXXValue * gDerivativeSValue * gDerivativeTValue +
                            secondPartialDerivativeYYValue * hDerivativeSValue * hDerivativeTValue +
                            secondPartialDerivativeXYValue * (gDerivativeSValue * hDerivativeTValue + gDerivativeTValue * hDerivativeSValue) +
                            partialDerivativeXValue * gSecondDerivativeSTValue +
                            partialDerivativeYValue * hSecondDerivativeSTValue;
                
                        derivativeSecondOrderSSResultElement.textContent = `f_ss en (s=${sValue}, t=${tValue}) es ${secondOrderDerivativeSS.toFixed(precision)}`;
                        derivativeSecondOrderTTResultElement.textContent = `f_tt en (s=${sValue}, t=${tValue}) es ${secondOrderDerivativeTT.toFixed(precision)}`;
                        derivativeSecondOrderSTResultElement.textContent = `f_st en (s=${sValue}, t=${tValue}) es ${secondOrderDerivativeST.toFixed(precision)}`;
                
                    } catch (error) {
                        functionValueResultElement.textContent = 'Error: No se pudo calcular la función o sus derivadas.';
                        derivativeFirstOrderSResultElement.textContent = '';
                        derivativeFirstOrderTResultElement.textContent = '';
                        derivativeSecondOrderSSResultElement.textContent = '';
                        derivativeSecondOrderTTResultElement.textContent = '';
                        derivativeSecondOrderSTResultElement.textContent = '';
                    }
                },

                generateValueTable: function() {
                    const functionExpression = document.getElementById('tableFunctionExpression').value;
                    const xStart = parseFloat(document.getElementById('xStart').value);
                    const xEnd = parseFloat(document.getElementById('xEnd').value);
                    const xStep = parseFloat(document.getElementById('xStep').value);
                    const yStart = parseFloat(document.getElementById('yStart').value);
                    const yEnd = parseFloat(document.getElementById('yEnd').value);
                    const yStep = parseFloat(document.getElementById('yStep').value);
                    const precision = parseInt(document.getElementById('tablePrecision').value);
                    const tableResultElement = document.getElementById('tableResult');
                
                    // Validar entradas
                    if (!functionExpression || isNaN(xStart) || isNaN(xEnd) || isNaN(xStep) || isNaN(yStart) || isNaN(yEnd) || isNaN(yStep)) {
                        tableResultElement.innerHTML = '<p>Error: Por favor ingresa todos los valores requeridos.</p>';
                        return;
                    }
                
                    // Validar que el tamaño del paso sea positivo
                    if (xStep <= 0 || yStep <= 0) {
                        tableResultElement.innerHTML = '<p>Error: Los tamaños de paso deben ser positivos.</p>';
                        return;
                    }
                
                    try {
                        // Compilar la función ingresada
                        const fn = math.compile(functionExpression);
                
                        // Generar la tabla de valores
                        let tableHTML = '<table><thead><tr><th>x</th><th>y</th><th>f(x, y)</th></tr></thead><tbody>';
                
                        for (let x = xStart; x <= xEnd; x += xStep) {
                            for (let y = yStart; y <= yEnd; y += yStep) {
                                const value = fn.evaluate({ x: x, y: y });
                                tableHTML += `<tr><td>${x.toFixed(precision)}</td><td>${y.toFixed(precision)}</td><td>${value.toFixed(precision)}</td></tr>`;
                            }
                        }
                
                        tableHTML += '</tbody></table>';
                        tableResultElement.innerHTML = tableHTML;
                
                    } catch (error) {
                        tableResultElement.innerHTML = '<p>Error: No se pudo calcular la tabla de valores.</p>';
                    }
                },

                solveLinearODE: function() {
                    const pExpression = document.getElementById('pFunctionExpression').value;
                    const qExpression = document.getElementById('qFunctionExpression').value;
                    const initialX = parseFloat(document.getElementById('initialX').value);
                    const initialY = parseFloat(document.getElementById('initialY').value);
                    const precision = parseInt(document.getElementById('odePrecision').value);
                    const generalSolutionElement = document.getElementById('odeGeneralSolution');
                
                    if (!pExpression || !qExpression || isNaN(initialX) || isNaN(initialY)) {
                        generalSolutionElement.textContent = 'Error: Por favor ingresa las funciones P(x), Q(x) y las condiciones iniciales.';
                        return;
                    }
                
                    try {
                        // Crear funciones P(x) y Q(x)
                        const P = math.parse(pExpression).compile();
                        const Q = math.parse(qExpression).compile();
                
                        // Crear la variable para evaluar x
                        const scope = { x: initialX };
                
                        // Calcular el factor integrante: µ(x) = exp(integrate(P(x), x))
                        const pIntegral = math.integrate(pExpression, 'x');
                        const integratingFactor = math.exp(pIntegral);
                
                        // Evaluar el factor integrante para el valor inicial de x
                        const integratingFactorAtInitialX = integratingFactor.evaluate(scope);
                
                        // Calcular la integral de Q(x) * µ(x)
                        const qTimesMuExpression = `(${qExpression}) * (${integratingFactor})`;
                        const integralOfQTimesMu = math.integrate(qTimesMuExpression, 'x');
                
                        // Evaluar la integral de Q(x) * µ(x) en el valor inicial de x
                        const integralOfQAtInitialX = integralOfQTimesMu.evaluate(scope);
                
                        // Calcular la constante de integración C usando la condición inicial
                        const CValue = initialY * integratingFactorAtInitialX - integralOfQAtInitialX;
                
                        // Definir la solución general con la constante de integración C
                        const solutionExpression = `(${integralOfQTimesMu} + ${CValue}) / (${integratingFactor})`;
                        const particularSolution = math.simplify(solutionExpression).toString();
                
                        // Mostrar la solución particular
                        generalSolutionElement.innerHTML = `<p>Solución Particular: y(x) = ${particularSolution}</p>`;
                
                    } catch (error) {
                        generalSolutionElement.textContent = 'Error: No se pudo calcular la solución de la ecuación diferencial.';
                        console.error('Error en solveLinearODE:', error);
                    }
                },

                solveLinearODENumerically: function() {
                    const pExpression = document.getElementById('pFunctionExpression').value;
                    const qExpression = document.getElementById('qFunctionExpression').value;
                    const initialX = parseFloat(document.getElementById('initialX').value);
                    const initialY = parseFloat(document.getElementById('initialY').value);
                    const stepSize = parseFloat(document.getElementById('stepSize').value);
                    const finalX = parseFloat(document.getElementById('evaluationX').value);
                    const precision = parseInt(document.getElementById('odePrecision').value);
                    const numericalSolutionElement = document.getElementById('odeNumericalSolution');
                
                    if (!pExpression || !qExpression || isNaN(initialX) || isNaN(initialY) || isNaN(stepSize) || isNaN(finalX)) {
                        numericalSolutionElement.textContent = 'Error: Por favor ingresa todas las funciones y valores requeridos.';
                        return;
                    }
                
                    try {
                        // Crear funciones P(x) y Q(x)
                        const P = math.parse(pExpression).compile();
                        const Q = math.parse(qExpression).compile();
                
                        // Inicializar valores
                        let x = initialX;
                        let y = initialY;
                
                        // Iterar usando el método de Euler hasta alcanzar el valor final de x
                        while (x < finalX) {
                            const scope = { x: x, y: y };
                            const pValue = P.evaluate(scope);
                            const qValue = Q.evaluate(scope);
                            const dydx = -pValue * y + qValue; // y' = -P(x)y + Q(x)
                            
                            // Actualizar y y x usando el método de Euler
                            y = y + stepSize * dydx;
                            x = x + stepSize;
                        }
                
                        // Mostrar la solución aproximada
                        numericalSolutionElement.innerHTML = `<p>Solución aproximada en x = ${finalX}: y(x) = ${y.toFixed(precision)}</p>`;
                
                    } catch (error) {
                        numericalSolutionElement.textContent = 'Error: No se pudo calcular la solución numérica de la ecuación diferencial.';
                        console.error('Error en solveLinearODENumerically:', error);
                    }
                },


                solveODEEulerImproved: function() {
                    const pExpression = document.getElementById('pFunctionEulerImproved').value;
                    const qExpression = document.getElementById('qFunctionEulerImproved').value;
                    const initialX = parseFloat(document.getElementById('initialXEulerImproved').value);
                    const initialY = parseFloat(document.getElementById('initialYEulerImproved').value);
                    const stepSize = parseFloat(document.getElementById('stepSizeEulerImproved').value);
                    const finalX = parseFloat(document.getElementById('evaluationXEulerImproved').value);
                    const precision = parseInt(document.getElementById('eulerImprovedPrecision').value);
                    const numericalSolutionElement = document.getElementById('eulerImprovedSolution');
                
                    if (!pExpression || !qExpression || isNaN(initialX) || isNaN(initialY) || isNaN(stepSize) || isNaN(finalX)) {
                        numericalSolutionElement.textContent = 'Error: Por favor ingresa todas las funciones y valores requeridos.';
                        return;
                    }
                
                    try {
                        // Crear funciones P(x) y Q(x)
                        const P = math.parse(pExpression).compile();
                        const Q = math.parse(qExpression).compile();
                
                        // Inicializar valores
                        let x = initialX;
                        let y = initialY;
                
                        // Iterar usando el método de Euler Mejorado hasta alcanzar el valor final de x
                        while (x < finalX) {
                            const scope = { x: x, y: y };
                            const pValue = P.evaluate(scope);
                            const qValue = Q.evaluate(scope);
                
                            // Predicción con el método de Euler estándar
                            const dydx = -pValue * y + qValue;
                            const yPredict = y + stepSize * dydx;
                
                            // Evaluar en el punto medio para corrección
                            const xMid = x + stepSize / 2;
                            const yMid = y + (stepSize / 2) * dydx;
                            const scopeMid = { x: xMid, y: yMid };
                            const pValueMid = P.evaluate(scopeMid);
                            const qValueMid = Q.evaluate(scopeMid);
                            const dydxMid = -pValueMid * yMid + qValueMid;
                
                            // Corrección utilizando el valor medio
                            y = y + stepSize * dydxMid;
                            x = x + stepSize;
                        }
                
                        // Mostrar la solución aproximada
                        numericalSolutionElement.innerHTML = `<p>Solución aproximada en x = ${finalX}: y(x) = ${y.toFixed(precision)}</p>`;
                
                    } catch (error) {
                        numericalSolutionElement.textContent = 'Error: No se pudo calcular la solución numérica de la ecuación diferencial.';
                        console.error('Error en solveODEEulerImproved:', error);
                    }
                },


                solveBisectionMethod: function() {
                    const fExpression = document.getElementById('bisectionFunction').value;
                    const a = parseFloat(document.getElementById('bisectionA').value);
                    const b = parseFloat(document.getElementById('bisectionB').value);
                    const tolerance = parseFloat(document.getElementById('bisectionTolerance').value);
                    const solutionElement = document.getElementById('bisectionSolution');
                    const tableContainer = document.getElementById('bisectionTableContainer');
                
                    // Limpiar cualquier contenido previo
                    solutionElement.textContent = '';
                    tableContainer.innerHTML = '';
                
                    // Verificar entradas válidas
                    if (!fExpression || isNaN(a) || isNaN(b) || a >= b || isNaN(tolerance) || tolerance <= 0) {
                        solutionElement.textContent = 'Error: Por favor ingresa una función válida, un intervalo [a, b] con a < b, y una tolerancia mayor a cero.';
                        return;
                    }
                
                    try {
                        // Crear la función f(x) a partir de la expresión ingresada
                        const f = math.parse(fExpression).compile();
                
                        // Verificar que f(a) * f(b) < 0 (la raíz debe estar en el intervalo)
                        let fa, fb;
                        try {
                            fa = f.evaluate({ x: a });
                            fb = f.evaluate({ x: b });
                        } catch (evalError) {
                            solutionElement.textContent = 'Error: La función ingresada no se puede evaluar correctamente en los límites del intervalo.';
                            return;
                        }
                
                        if (fa * fb >= 0) {
                            solutionElement.textContent = 'Error: El intervalo [a, b] no contiene una raíz o la función no cambia de signo en el intervalo.';
                            return;
                        }
                
                        // Crear tabla para mostrar el proceso
                        let tableHTML = '<h4>Proceso del Método de Bisección</h4>';
                        tableHTML += '<table><thead><tr><th>Iteración</th><th>a</th><th>b</th><th>Punto Medio</th><th>f(Punto Medio)</th></tr></thead><tbody>';
                
                        // Mostrar los valores iniciales del intervalo
                        tableHTML += `<tr><td>0</td><td>${a.toFixed(10)}</td><td>${b.toFixed(10)}</td><td>N/A</td><td>N/A</td></tr>`;
                
                        // Implementación del método de bisección
                        let left = a;
                        let right = b;
                        let midpoint;
                        let fMid;
                        let iteration = 1;
                
                        // Condición de terminación: cuando la longitud del intervalo es menor a la tolerancia
                        while ((right - left) / 2 > tolerance) {
                            midpoint = (left + right) / 2;
                
                            try {
                                fMid = f.evaluate({ x: midpoint });
                            } catch (evalError) {
                                solutionElement.textContent = 'Error: No se pudo evaluar la función en el punto medio del intervalo.';
                                return;
                            }
                
                            // Añadir fila a la tabla
                            tableHTML += `<tr><td>${iteration}</td><td>${left.toFixed(10)}</td><td>${right.toFixed(10)}</td><td>${midpoint.toFixed(10)}</td><td>${fMid.toFixed(10)}</td></tr>`;
                            iteration++;
                
                            // Si encontramos la raíz exacta (caso poco común)
                            if (Math.abs(fMid) < tolerance) {
                                break;
                            }
                
                            // Decidir el nuevo intervalo
                            if (fa * fMid < 0) {
                                right = midpoint;
                                fb = fMid;
                            } else {
                                left = midpoint;
                                fa = fMid;
                            }
                        }
                
                        // Añadir última fila a la tabla
                        midpoint = (left + right) / 2;
                
                        try {
                            fMid = f.evaluate({ x: midpoint });
                        } catch (evalError) {
                            solutionElement.textContent = 'Error: No se pudo evaluar la función en el punto medio del intervalo final.';
                            return;
                        }
                
                        tableHTML += `<tr><td>${iteration}</td><td>${left.toFixed(10)}</td><td>${right.toFixed(10)}</td><td>${midpoint.toFixed(10)}</td><td>${fMid.toFixed(10)}</td></tr>`;
                        tableHTML += '</tbody></table>';
                
                        // Mostrar la tabla en el contenedor
                        tableContainer.innerHTML = tableHTML;
                
                        // Aproximación de la raíz
                        const approxRoot = (left + right) / 2;
                        solutionElement.innerHTML = `<p>Raíz aproximada: x = ${approxRoot.toFixed(10)}</p>`;
                
                    } catch (error) {
                        solutionElement.textContent = 'Error: No se pudo calcular la raíz usando el método de bisección.';
                        console.error('Error en solveBisectionMethod:', error);
                    }
                },



                solveSecantMethod: function() {
                    const fExpression = document.getElementById('secantFunction').value;
                    const x0 = parseFloat(document.getElementById('secantX0').value);
                    const x1 = parseFloat(document.getElementById('secantX1').value);
                    const tolerance = parseFloat(document.getElementById('secantTolerance').value);
                    const solutionElement = document.getElementById('secantSolution');
                    const tableContainer = document.getElementById('secantTableContainer');
                
                    // Limpiar cualquier contenido previo
                    solutionElement.textContent = '';
                    tableContainer.innerHTML = '';
                
                    // Verificar entradas válidas
                    if (!fExpression || isNaN(x0) || isNaN(x1) || isNaN(tolerance) || tolerance <= 0) {
                        solutionElement.textContent = 'Error: Por favor ingresa una función válida, dos puntos iniciales x₀ y x₁, y una tolerancia mayor a cero.';
                        return;
                    }
                
                    try {
                        // Crear la función f(x) a partir de la expresión ingresada
                        const f = math.parse(fExpression).compile();
                
                        let prev = x0;
                        let curr = x1;
                        let fPrev, fCurr;
                        let next;
                        let iteration = 0;
                
                        // Crear tabla para mostrar el proceso
                        let tableHTML = '<h4>Proceso del Método de la Secante</h4>';
                        tableHTML += '<table><thead><tr><th>Iteración</th><th>xₙ₋₁</th><th>xₙ</th><th>f(xₙ₋₁)</th><th>f(xₙ)</th><th>Siguiente x</th></tr></thead><tbody>';
                
                        while (true) {
                            try {
                                fPrev = f.evaluate({ x: prev });
                                fCurr = f.evaluate({ x: curr });
                            } catch (evalError) {
                                solutionElement.textContent = 'Error: No se pudo evaluar la función en uno de los puntos.';
                                return;
                            }
                
                            // Verificar si fCurr es cercano a cero
                            if (Math.abs(fCurr) < tolerance) {
                                break;
                            }
                
                            // Calcular el siguiente valor usando la fórmula del método de la secante
                            next = curr - (fCurr * (curr - prev)) / (fCurr - fPrev);
                
                            // Añadir fila a la tabla
                            tableHTML += `<tr><td>${iteration}</td><td>${prev.toFixed(10)}</td><td>${curr.toFixed(10)}</td><td>${fPrev.toFixed(10)}</td><td>${fCurr.toFixed(10)}</td><td>${next.toFixed(10)}</td></tr>`;
                            iteration++;
                
                            // Verificar si la diferencia entre el valor actual y el siguiente es menor que la tolerancia
                            if (Math.abs(next - curr) < tolerance) {
                                break;
                            }
                
                            // Actualizar los valores para la siguiente iteración
                            prev = curr;
                            curr = next;
                        }
                
                        tableHTML += '</tbody></table>';
                
                        // Mostrar la tabla en el contenedor
                        tableContainer.innerHTML = tableHTML;
                
                        // Aproximación de la raíz
                        solutionElement.innerHTML = `<p>Raíz aproximada: x = ${curr.toFixed(10)}</p>`;
                
                    } catch (error) {
                        solutionElement.textContent = 'Error: No se pudo calcular la raíz usando el método de la secante.';
                        console.error('Error en solveSecantMethod:', error);
                    }
                },


                solveNewtonRaphsonMethod: function() {
                    const fExpression = document.getElementById('newtonFunction').value;
                    const x0 = parseFloat(document.getElementById('newtonX0').value);
                    const tolerance = parseFloat(document.getElementById('newtonTolerance').value);
                    const solutionElement = document.getElementById('newtonSolution');
                    const tableContainer = document.getElementById('newtonTableContainer');
                
                    // Limpiar cualquier contenido previo
                    solutionElement.textContent = '';
                    tableContainer.innerHTML = '';
                
                    // Verificar entradas válidas
                    if (!fExpression || isNaN(x0) || isNaN(tolerance) || tolerance <= 0) {
                        solutionElement.textContent = 'Error: Por favor ingresa una función válida, un punto inicial x₀, y una tolerancia mayor a cero.';
                        return;
                    }
                
                    try {
                        // Crear la función f(x) a partir de la expresión ingresada
                        const f = math.parse(fExpression).compile();
                        // Calcular la derivada de la función f(x)
                        const fDerivative = math.derivative(fExpression, 'x').compile();
                
                        let curr = x0;
                        let fCurr, fDerivCurr;
                        let next;
                        let iteration = 0;
                
                        // Crear tabla para mostrar el proceso
                        let tableHTML = '<h4>Proceso del Método de Newton-Raphson</h4>';
                        tableHTML += '<table><thead><tr><th>Iteración</th><th>xₙ</th><th>f(xₙ)</th><th>f\'(xₙ)</th><th>Siguiente x</th></tr></thead><tbody>';
                
                        while (true) {
                            try {
                                fCurr = f.evaluate({ x: curr });
                                fDerivCurr = fDerivative.evaluate({ x: curr });
                            } catch (evalError) {
                                solutionElement.textContent = 'Error: No se pudo evaluar la función o su derivada en el punto actual.';
                                return;
                            }
                
                            // Verificar si fCurr es cercano a cero
                            if (Math.abs(fCurr) < tolerance) {
                                break;
                            }
                
                            // Verificar que la derivada no sea cero para evitar división por cero
                            if (Math.abs(fDerivCurr) < 1e-10) {
                                solutionElement.textContent = 'Error: La derivada es cercana a cero, el método no puede continuar.';
                                return;
                            }
                
                            // Calcular el siguiente valor usando la fórmula de Newton-Raphson
                            next = curr - (fCurr / fDerivCurr);
                
                            // Añadir fila a la tabla
                            tableHTML += `<tr><td>${iteration}</td><td>${curr.toFixed(10)}</td><td>${fCurr.toFixed(10)}</td><td>${fDerivCurr.toFixed(10)}</td><td>${next.toFixed(10)}</td></tr>`;
                            iteration++;
                
                            // Verificar si la diferencia entre el valor actual y el siguiente es menor que la tolerancia
                            if (Math.abs(next - curr) < tolerance) {
                                break;
                            }
                
                            // Actualizar el valor para la siguiente iteración
                            curr = next;
                        }
                
                        tableHTML += '</tbody></table>';
                
                        // Mostrar la tabla en el contenedor
                        tableContainer.innerHTML = tableHTML;
                
                        // Aproximación de la raíz
                        solutionElement.innerHTML = `<p>Raíz aproximada: x = ${curr.toFixed(10)}</p>`;
                
                    } catch (error) {
                        solutionElement.textContent = 'Error: No se pudo calcular la raíz usando el método de Newton-Raphson.';
                        console.error('Error en solveNewtonRaphsonMethod:', error);
                    }
                },


                solveTrapezoidRule: function() {
                    const fExpression = document.getElementById('trapezoidFunction').value;
                    const a = parseFloat(document.getElementById('trapezoidA').value);
                    const b = parseFloat(document.getElementById('trapezoidB').value);
                    const numTrapezoids = parseInt(document.getElementById('numTrapezoids').value);
                    const precision = parseInt(document.getElementById('trapezoidPrecision').value);
                    const solutionElement = document.getElementById('trapezoidSolution');
                
                    // Limpiar cualquier contenido previo
                    solutionElement.textContent = '';
                
                    // Verificar entradas válidas
                    if (!fExpression || isNaN(a) || isNaN(b) || isNaN(numTrapezoids) || numTrapezoids <= 0 || isNaN(precision) || precision < 0) {
                        solutionElement.textContent = 'Error: Por favor ingresa una función válida, un intervalo [a, b] válido, un número positivo de trapecios, y una precisión válida.';
                        return;
                    }
                
                    try {
                        // Crear la función f(x) a partir de la expresión ingresada
                        const f = math.parse(fExpression).compile();
                
                        // Calcular el ancho de cada trapecio
                        const h = (b - a) / numTrapezoids;
                        let integral = 0;
                
                        // Sumar las áreas de los trapecios
                        for (let i = 0; i <= numTrapezoids; i++) {
                            const x = a + i * h;
                            let fx;
                            try {
                                fx = f.evaluate({ x: x });
                            } catch (evalError) {
                                solutionElement.textContent = 'Error: No se pudo evaluar la función en el punto ' + x;
                                return;
                            }
                
                            if (i === 0 || i === numTrapezoids) {
                                integral += fx;
                            } else {
                                integral += 2 * fx;
                            }
                        }
                
                        // Aplicar la fórmula de la regla de trapecios
                        integral = (h / 2) * integral;
                
                        // Mostrar el resultado con la precisión solicitada
                        solutionElement.innerHTML = `<p>Valor aproximado de la integral: ${integral.toFixed(precision)}</p>`;
                    } catch (error) {
                        solutionElement.textContent = 'Error: No se pudo calcular la integral usando la Regla de Trapecios.';
                        console.error('Error en solveTrapezoidRule:', error);
                    }
                },


                solveSimpsonRule: function() {
                    const fExpression = document.getElementById('simpsonFunction').value;
                    const a = parseFloat(document.getElementById('simpsonA').value);
                    const b = parseFloat(document.getElementById('simpsonB').value);
                    const numIntervals = parseInt(document.getElementById('numSimpsonIntervals').value);
                    const precision = parseInt(document.getElementById('simpsonPrecision').value);
                    const solutionElement = document.getElementById('simpsonSolution');
                
                    // Limpiar cualquier contenido previo
                    solutionElement.textContent = '';
                
                    // Verificar entradas válidas
                    if (!fExpression || isNaN(a) || isNaN(b) || isNaN(numIntervals) || numIntervals <= 0 || numIntervals % 2 !== 0 || isNaN(precision) || precision < 0) {
                        solutionElement.textContent = 'Error: Por favor ingresa una función válida, un intervalo [a, b] válido, un número positivo y par de subintervalos, y una precisión válida.';
                        return;
                    }
                
                    try {
                        // Crear la función f(x) a partir de la expresión ingresada
                        const f = math.parse(fExpression).compile();
                
                        // Calcular el ancho de cada subintervalo
                        const h = (b - a) / numIntervals;
                        let integral = 0;
                
                        // Sumar las áreas utilizando la Regla de Simpson 1/3
                        for (let i = 0; i <= numIntervals; i++) {
                            const x = a + i * h;
                            let fx;
                            try {
                                fx = f.evaluate({ x: x });
                            } catch (evalError) {
                                solutionElement.textContent = 'Error: No se pudo evaluar la función en el punto ' + x;
                                return;
                            }
                
                            if (i === 0 || i === numIntervals) {
                                integral += fx;
                            } else if (i % 2 === 0) {
                                integral += 2 * fx;
                            } else {
                                integral += 4 * fx;
                            }
                        }
                
                        // Aplicar la fórmula de la Regla de Simpson 1/3
                        integral = (h / 3) * integral;
                
                        // Mostrar el resultado con la precisión solicitada
                        solutionElement.innerHTML = `<p>Valor aproximado de la integral: ${integral.toFixed(precision)}</p>`;
                    } catch (error) {
                        solutionElement.textContent = 'Error: No se pudo calcular la integral usando la Regla de Simpson 1/3.';
                        console.error('Error en solveSimpsonRule:', error);
                    }
                },
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
            




        };
    </script>
</body>
</html>
